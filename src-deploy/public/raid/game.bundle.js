!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=100)}([function(t,e,n){"use strict";var r=n(104);n.d(e,"b",function(){return r.a});var o=n(237);n.n(o);n.d(e,"c",function(){return o});var i=n(238);n.n(i);n.d(e,"a",function(){return i});var s=n(96);n.n(s)},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(60),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){"use strict";function r(t,e,n,r){var o=t.getTexture(e),i=new PIXI.Sprite(new PIXI.Texture(o.baseTexture)),s=new PIXI.Rectangle(16*r,16*n,16,16);return i.texture.frame=s,i}function o(t,e,n){for(var r=[],o=0;o<n;o++)r.push(new PIXI.Rectangle(16*(e+o),16*t,16,16));return r}function i(t,e){return new PIXI.Rectangle(16*e,16*t,16,16)}e.c=r,e.b=o,e.a=i},function(t,e,n){function r(t){return s(t)?o(t):i(t)}var o=n(58),i=n(114),s=n(7);t.exports=r},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){function r(t){return null!=t&&i(t.length)&&!o(t)}var o=n(39),i=n(37);t.exports=r},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){function r(t,e){var n=i(t,e);return o(n)?n:void 0}var o=n(130),i=n(133);t.exports=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r,o=n(0);!function(t){t[t.escape=27]="escape",t[t.w=87]="w",t[t.a=65]="a",t[t.s=83]="s",t[t.d=68]="d",t[t.space=32]="space",t[t.enter=13]="enter",t[t.arrowUp=38]="arrowUp",t[t.arrowDown=40]="arrowDown",t[t.arrowLeft=37]="arrowLeft",t[t.arrowRight=39]="arrowRight",t[t.r=82]="r",t[t.h=72]="h"}(r||(r={}));var i=function(){function t(){this.keys={}}return t.prototype.init=function(){window.addEventListener("keydown",this.onKeyDown.bind(this),!0),window.addEventListener("keyup",this.onKeyUp.bind(this),!0)},t.prototype.onKeyDown=function(t){var e=this.keys[t.keyCode];e&&(console.log("key down",t.keyCode),e._delay_justPressed=!0,e._delay_isPressed=!0,event.preventDefault())},t.prototype.onKeyUp=function(t){var e=this.keys[t.keyCode];e&&(console.log("key up",t.keyCode),e._delay_justReleased=!0,e._delay_isPressed=!1,event.preventDefault())},t.prototype.onUpdate=function(){o.b.forEach(this.keys,function(t){t.isPressed=t._delay_isPressed,t.justPressed=t._delay_justPressed,t.justReleased=t._delay_justReleased,t._delay_justPressed=!1,t._delay_justReleased=!1})},t.prototype.getKey=function(t){var e=this.keys[t];return e||(e=this.listenFor(t)),e},t.prototype.isPressed=function(t){return this.getKey(t).isPressed},t.prototype.isUp=function(t){return!this.getKey(t).isPressed},t.prototype.justPressed=function(t){return this.getKey(t).justPressed},t.prototype.justReleased=function(t){return this.getKey(t).justReleased},t.prototype.listenFor=function(t){var e=this.keys[t];return e?(console.warn("already listening to key "+t),e):(console.log("listening to key "+t),e={keyCode:t,isPressed:!1,_delay_isPressed:!1,justPressed:!1,justReleased:!1,_delay_justPressed:!1,_delay_justReleased:!1},this.keys[t]=e,e)},t}()},function(t,e,n){function r(t){return null==t?void 0===t?u:a:c&&c in Object(t)?i(t):s(t)}var o=n(12),i=n(109),s=n(110),a="[object Null]",u="[object Undefined]",c=o?o.toStringTag:void 0;t.exports=r},function(t,e,n){var r=n(2),o=r.Symbol;t.exports=o},function(t,e,n){function r(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?a(t)?i(t[0],t[1]):o(t):u(t)}var o=n(118),i=n(159),s=n(8),a=n(1),u=n(169);t.exports=r},function(t,e,n){function r(t){return"symbol"==typeof t||i(t)&&o(t)==s}var o=n(11),i=n(6),s="[object Symbol]";t.exports=r},function(t,e,n){"use strict";function r(t){y.a(t.getJson("audioSprite"),function(){d(),g&&setInterval(function(){d()},500)}),o()}function o(){y.c(x+"theme1")}function i(){y.c(x+"menu1")}function s(){y.c(x+"dead1",!1,function(){y.c(x+"theme1")})}function a(){y.c(x+"dungeon1")}function u(){y.c(x+"boss1")}function c(){y.c(x+"winner1",!1,function(){y.c(x+"theme1")})}function d(){y.b("smash001")}function h(){y.b("jump001")}function f(){y.b("invinc001")}function l(){var t=["pickup002","pickup003"];y.b(b.b.sample(t))}function p(){y.b("hurt001")}function v(){y.b("smash001")}function m(){y.b("hatthrow001")}Object.defineProperty(e,"__esModule",{value:!0}),e.load=r,e.playMusic1=o,e.playMusicMenu=i,e.playMusicDie=s,e.playMusicDungeon=a,e.playMusicBoss=u,e.playMusicWin=c,e.playLoaded=d,e.playJump=h,e.playMetal=f,e.playPickup=l,e.playExplode=p,e.playSmash=v,e.playThrowHat=m;var b=n(0),y=n(253),_=n(20),g=!1,x="/public/ludumDare40/music/";_.b("gui:click-button",function(){p()}),_.b("gui:toggle-music",function(){o()})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=(Math.PI,32),o=function(){function t(){this.onGround=!1,this.isJumping=!1,this.isFalling=!0,this.isFastFalling=!0,this.jumpFrames=0,this.fallFrames=0,this.isGhost=!1,this.isTouchingFatal=!1,this.isMovingRight=!1,this.isMovingLeft=!1,this.movingFrames=0,this.vx=0,this.vy=0,this.subX=0*r,this.subY=0*r,this.x=0,this.y=0,this.accelX=0,this.accelY=0,this.width=8,this.height=8,this.groundDrag=.97,this.airDrag=.99,this.maxVx=64,this.maxVy=64,this.boundsX1=0,this.boundsX2=0,this.boundsY1=0,this.boundsY2=0,this.facingRight=!0}return t.prototype.reset=function(){this.vx=0,this.vy=0,this.accelX=0,this.accelY=0,this.onGround=!1,this.isJumping=!1,this.isFalling=!0,this.isFastFalling=!0,this.isGhost=!1},t.prototype.moveTo=function(t,e){this.subX=t*r,this.subY=e*r,this.recalcBounds()},t.prototype.recalcBounds=function(){this.x=Math.floor(this.subX/r),this.y=Math.floor(this.subY/r),this._setBounds(this.x-this.width/2,this.y-this.height,this.x+this.width/2,this.y)},t.prototype._setBounds=function(t,e,n,r){this.boundsX1=t,this.boundsX2=n,this.boundsY1=e,this.boundsY2=r},t.prototype.setStateFalling=function(){this.onGround=!1,this.isJumping=!1,this.isFalling=!0,this.isFastFalling=!0},t.prototype.setStateOnGround=function(){this.onGround=!0,this.isFalling=!1,this.isFastFalling=!1,this.isJumping=!1,this.fallFrames=0,this.vy=0,this.accelY=0},t.prototype.jump=function(){this.isJumping=!0,this.onGround=!1,this.isFalling=!1,this.isFastFalling=!1,this.jumpFrames=0,this.accelY=-8},t.prototype.update=function(t){this.isTouchingFatal=!1,this.isFalling&&(this.fallFrames++,this.isFastFalling?this.fallFrames<8?this.accelY=8:this.fallFrames<16?this.accelY=14:this.fallFrames<32?this.accelY=16:this.accelY=20:this.fallFrames<8?this.accelY=4:this.fallFrames<16?this.accelY=8:this.fallFrames<32?this.accelY=12:this.accelY=16),this.vy+=this.accelY,this.vx+=this.accelX,this.vx>this.maxVx&&(this.vx=this.maxVx),this.vx<-this.maxVx&&(this.vx=-this.maxVx),this.vy>this.maxVy&&(this.vy=this.maxVy),this.vy<-this.maxVy&&(this.vy=-this.maxVy),this.subY+=this.vy,this.subX+=this.vx,this.onGround?this.groundDrag&&(this.vx=this.vx*this.groundDrag):this.airDrag&&(this.vx=this.vx*this.airDrag),this.recalcBounds();var e=t.tileMap;if(!this.isGhost){var n=e.safeGetTileAtWorld(this.boundsX2,this.boundsY2-1),o=!1,i=0;n&&(n.canMove||(n.fatal&&(this.isTouchingFatal=!0),o=!0,i=16*n.bx*r-4*r-1,this.vx=0,this.subX=i));var s=e.safeGetTileAtWorld(this.boundsX2,this.boundsY1+1),a=!1;i=0,s&&(s.canMove||(s.fatal&&(this.isTouchingFatal=!0),a=!0,i=16*s.bx*r-4*r-1,this.vx=0,this.subX=i));var u=e.safeGetTileAtWorld(this.boundsX1,this.boundsY2-1),c=!1,d=0;u&&(u.canMove||(u.fatal&&(this.isTouchingFatal=!0),c=!0,d=16*(u.bx+1)*r+4*r+1,this.vx=0,this.subX=d));var h=e.safeGetTileAtWorld(this.boundsX1,this.boundsY1+1),f=!1;d=0,h&&(h.canMove||(h.fatal&&(this.isTouchingFatal=!0),f=!0,d=16*(h.bx+1)*r+4*r+1,this.vx=0,this.subX=d)),(o||a||c||f)&&this.recalcBounds();var l=e.safeGetTileAtWorld(this.boundsX1,this.boundsY2+1),p=!1,v=0;l&&(l.canMove||(l.fatal&&(this.isTouchingFatal=!0),p=!0,v=16*l.by));var m=e.safeGetTileAtWorld(this.boundsX2,this.boundsY2+1),b=!1;m&&(m.canMove||(m.fatal&&(this.isTouchingFatal=!0),b=!0,v=16*l.by));var y=e.safeGetTileAtWorld(this.boundsX1,this.boundsY1-1),_=!1;y&&(y.canMove||(y.fatal&&(this.isTouchingFatal=!0),_=!0,16*y.by));var g=e.safeGetTileAtWorld(this.boundsX2,this.boundsY1-1),x=!1;g&&(g.canMove||(g.fatal&&(this.isTouchingFatal=!0),x=!0,16*g.by)),this.isFalling&&(p||b)&&(this.subY=v*r,this.setStateOnGround()),this.isJumping&&(_||x)&&(this.setStateFalling(),this.vy<0&&(this.vy=0)),this.onGround&&(p||b||this.setStateFalling())}this.subY>=32768&&(this.subY=32768,this.setStateOnGround()),this.recalcBounds()},t}()},function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},function(t,e,n){function r(t){if("string"==typeof t||o(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}var o=n(14),i=1/0;t.exports=r},function(t,e,n){function r(t,e,n,r){var s=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var c=e[a],d=r?r(n[c],t[c],c,n,t):void 0;void 0===d&&(d=t[c]),s?i(n,c,d):o(n,c,d)}return n}var o=n(87),i=n(50);t.exports=r},function(t,e,n){"use strict";function r(t,e){a.emit(t,e)}function o(t,e){a.on(t,e)}e.a=r,e.b=o;var i=n(0),s=new i.a({}),a=s.getEventHub()},function(t,e,n){var r=n(108),o=n(6),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(2),o=n(111),i="object"==typeof e&&e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i,u=a?r.Buffer:void 0,c=u?u.isBuffer:void 0,d=c||o;t.exports=d}).call(e,n(35)(t))},function(t,e){function n(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||o.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=n},function(t,e,n){function r(t){var e=this.__data__=new o(t);this.size=e.size}var o=n(25),i=n(125),s=n(126),a=n(127),u=n(128),c=n(129);r.prototype.clear=i,r.prototype.delete=s,r.prototype.get=a,r.prototype.has=u,r.prototype.set=c,t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(120),i=n(121),s=n(122),a=n(123),u=n(124);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,t.exports=r},function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1}var o=n(17);t.exports=r},function(t,e,n){var r=n(9),o=r(Object,"create");t.exports=o},function(t,e,n){function r(t,e){var n=t.__data__;return o(e)?n["string"==typeof e?"string":"hash"]:n.map}var o=n(142);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}t.exports=n},function(t,e,n){function r(t,e,n){if(!a(n))return!1;var r=typeof e;return!!("number"==r?i(n)&&s(e,n.length):"string"==r&&e in n)&&o(n[e],t)}var o=n(17),i=n(7),s=n(23),a=n(3);t.exports=r},function(t,e,n){function r(t){return s(t)?o(t,!0):i(t)}var o=n(58),i=n(206),s=n(7);t.exports=r},function(t,e,n){"use strict";(function(e){var n=void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},r={extend:function(t,e){for(var n in e)t[n]=e[n];return t},createNonEnumerable:function(t,e){var n={};for(var r in t)n[r]={value:t[r]};return Object.create(e||{},n)},error:function(t){var e=new Error(t);if(console)return console.error(e);throw e},each:function(t,e){var n,r,o;if(t&&t.constructor===Array)for(n=0,r=t.length;n<r;n++)e(t[n],n);else for(o=Object.keys(t),n=0,r=o.length;n<r;n++)e(t[o[n]],o[n])},addNE:function(t,e){for(var n in e)Object.defineProperty(t,n,{enumerable:!1,configurable:!0,writable:!0,value:e[n]})},createNE:function(t){var e={};for(var n in t)e[n]={writable:!0,configurable:!0,enumerable:!1,value:t[n]};return e},nextTick:function(){function t(){for(i=!1;r=o.shift();)r()}function e(t){o.push(t),i||(i=!0,a())}var r,o=[],i=!1,s=!!n.postMessage&&"undefined"!=typeof Window&&n instanceof Window,a=function(){return s?function(){n.postMessage("nexttick","*")}:function(){setTimeout(function(){u()},0)}}(),u=function(){return s?function(e){e.source===n&&"nexttick"===e.data&&(e.stopPropagation(),t())}:t}();return s&&n.addEventListener("message",u,!0),e.removeListener=function(){n.removeEventListener("message",u,!0)},e}(),findPivot:function(t){if(t&&t.__){if(t.__.pivot)return t;for(var e,n=0,r=t.__.parents,o=0;!n&&o<r.length;)e=r[o],e.__.pivot&&(n=e),o++;if(n)return n;for(o=0;!n&&o<r.length;)n=this.findPivot(r[o]),o++;return n}},isLeaf:function(t,e){var n;return!t||!(n=t.constructor)||(e?n===String||n===Number||n===Boolean:n!==Object&&n!==Array)},warn:function(){var t;void 0!==e&&"production"===e.env.NODE_ENV||arguments[0]||"undefined"==typeof console||(t=Array.prototype.slice.call(arguments,1),t[0]="Freezer.js WARNING: "+t[0],console.warn.apply(console,t))}};t.exports=r}).call(e,n(240))},function(t,e,n){"use strict";function r(t){d=t,console.log("loading settings",t);try{var e=u.get(t);if(e){var n=JSON.parse(e);a.b.merge(c,n)}}catch(t){console.error("Error loading menu settings")}return c}function o(){console.log("saving settings",d,c),u.set(d,JSON.stringify(c))}function i(){return c}function s(t){a.b.merge(c,t),o()}e.b=r,e.a=i,e.c=s;var a=n(0),u=n(96),c=(n.n(u),{menuMode:"title",muteMusic:!1,muteSound:!1,stevie:"Stevie B.",casey:"Casey B.",brenden:"Brenden B."}),d=null},function(t,e,n){var r=n(106),o=n(116),i=o(r);t.exports=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(112),o=n(62),i=n(113),s=i&&i.isTypedArray,a=s?o(s):r;t.exports=a},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},function(t,e,n){function r(t){if(!i(t))return!1;var e=o(t);return e==a||e==u||e==s||e==c}var o=n(11),i=n(3),s="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";t.exports=r},function(t,e,n){var r=n(9),o=n(2),i=r(o,"Map");t.exports=i},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(134),i=n(141),s=n(143),a=n(144),u=n(145);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}t.exports=n},function(t,e,n){var r=n(153),o=n(74),i=Object.prototype,s=i.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return s.call(t,e)}))}:o;t.exports=u},function(t,e,n){function r(t,e){e=o(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[i(e[n++])];return n&&n==r?t:void 0}var o=n(45),i=n(18);t.exports=r},function(t,e,n){function r(t,e){return o(t)?t:i(t,e)?[t]:s(a(t))}var o=n(1),i=n(46),s=n(161),a=n(164);t.exports=r},function(t,e,n){function r(t,e){if(o(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!s.test(t)||null!=e&&t in Object(e))}var o=n(1),i=n(14),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=r},function(t,e,n){function r(t,e){return s(i(t,e,o),t+"")}var o=n(8),i=n(181),s=n(183);t.exports=r},function(t,e){function n(t,e){return t+r(o()*(e-t+1))}var r=Math.floor,o=Math.random;t.exports=n},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e,n){function r(t,e,n){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var o=n(80);t.exports=r},function(t,e,n){var r=n(63),o=r(Object.getPrototypeOf,Object);t.exports=o},function(t,e,n){function r(t){var e=new t.constructor(t.byteLength);return new o(e).set(new o(t)),e}var o=n(69);t.exports=r},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(0),o=n(97),i=n(255),s=n(20),a=n(256),u=function(){function t(){this.menuButtons=[],this.activeButtonIndex=0,this.currentItemX=0,this.currentItemY=0}return t.prototype.init=function(t,e,n){this.sge=t,this.container=e,this.textTitle=new PIXI.extras.BitmapText(""+n,{font:"48px defaultfont",align:"left"}),this.textTitle.anchor=new PIXI.Point(0,0),this.container.addChild(this.textTitle)},t.prototype.changeModeTo=function(t){this.activeButtonIndex=0,s.a("menu:change-mode",{menuMode:t})},t.prototype.addButtonSimple=function(t){var e=this,n=new o.a;return n.init(this.sge,t),n.onOver=function(t){e.activeButtonIndex=r.b.findIndex(e.menuButtons,function(e){return e===t})},this.menuButtons.push(n),this.container.addChild(n.container),n},t.prototype.addOptionSimple=function(t,e,n){var r=new i.a;return r.init(this.sge,t,e,n),this.menuButtons.push(r),this.container.addChild(r.container),r},t.prototype.update=function(t){var e=this,n=0;r.b.forEach(this.menuButtons,function(t,e){t.container.visible&&n++}),this.activeButtonIndex=a.a(this.activeButtonIndex,0,n),this.textTitle.x=50,this.textTitle.y=50;var o=120;if(t){var i=t.input;if(i.combinedOk.justPressed);else{var s=i.dir;s!==i.lastDir&&(2!==s&&1!==s||this.activeButtonIndex++,3!==s&&0!==s||this.activeButtonIndex--),i.keyUp.justPressed&&this.activeButtonIndex--,i.keyDown.justPressed&&this.activeButtonIndex++}var u=-1;r.b.forEach(this.menuButtons,function(t,n){if(t.container.visible){u++;var r=u===e.activeButtonIndex;t.setActive(r),u===e.activeButtonIndex&&i.combinedOk.justPressed&&t.doClick(),t.update(0,o),r&&(e.currentItemX=100,e.currentItemY=o),o+=70}else t.setActive(!1)})}},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),o=n(4),i=n(262),s=2*Math.PI,a=function(){function t(){this.container=new PIXI.Container,this.hats=[],this.facingRight=!0,this.x=0,this.y=0}return t.prototype.init=function(t){this.sge=t},t.prototype.update=function(){var t=this,e=t.x,n=t.y;this.container.position.set(e,n),this.restackHats()},t.prototype.restackHats=function(){var t=this;r.b.forEach(this.hats,function(e,n){e.position.set(0+(t.facingRight?1:-1),0-3*n),e.scale.set(t.facingRight?1:-1,1),0===n&&(e.rotation=0)})},t.prototype.clear=function(){var t=this;r.b.forEach(this.hats,function(e){t.container.removeChild(e)}),this.hats=[]},t.prototype.addHat=function(t){void 0===t&&(t=null);var e=[s/64,s/32,s/16,0,0,0,-s/16,-s/32,-s/64],n=r.b.sample(i.a),a=o.c(this.sge,"ase-512-16",n.y,n.x);t&&(a.texture.frame=t),a.anchor.set(.5,.6875),a.rotation=r.b.sample(e),0===this.hats.length&&(a.rotation=0),this.hats.push(a),this.container.addChild(a),this.restackHats()},t.prototype.removeBottomHat=function(){var t=this.hats.shift();return this.container.removeChild(t),t},t.prototype.removeTopHat=function(){var t=this.hats.pop();return this.container.removeChild(t),t},t}()},function(t,e,n){"use strict";function r(t){throw void 0===t&&(t="unknown reason"),new Error(t)}function o(t,e){t&&r(e)}function i(t,e){null!==t&&void 0!==t||r(e)}e.b=o,e.a=i},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}t.exports=n},function(t,e,n){var r=n(107),o=r();t.exports=o},function(t,e,n){function r(t,e){var n=s(t),r=!n&&i(t),d=!n&&!r&&a(t),f=!n&&!r&&!d&&c(t),l=n||r||d||f,p=l?o(t.length,String):[],v=p.length;for(var m in t)!e&&!h.call(t,m)||l&&("length"==m||d&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||p.push(m);return p}var o=n(59),i=n(21),s=n(1),a=n(22),u=n(23),c=n(36),d=Object.prototype,h=d.hasOwnProperty;t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(61))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){function r(t){return"function"==typeof t?t:o}var o=n(8);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}t.exports=n},function(t,e){function n(t){if(null!=t){try{return o.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,o=r.toString;t.exports=n},function(t,e,n){function r(t,e,n,s,a){return t===e||(null==t||null==e||!i(t)&&!i(e)?t!==t&&e!==e:o(t,e,n,s,r,a))}var o=n(146),i=n(6);t.exports=r},function(t,e,n){function r(t,e,n,r,c,d){var h=n&a,f=t.length,l=e.length;if(f!=l&&!(h&&l>f))return!1;var p=d.get(t);if(p&&d.get(e))return p==e;var v=-1,m=!0,b=n&u?new o:void 0;for(d.set(t,e),d.set(e,t);++v<f;){var y=t[v],_=e[v];if(r)var g=h?r(_,y,v,e,t,d):r(y,_,v,t,e,d);if(void 0!==g){if(g)continue;m=!1;break}if(b){if(!i(e,function(t,e){if(!s(b,e)&&(y===t||c(y,t,n,r,d)))return b.push(e)})){m=!1;break}}else if(y!==_&&!c(y,_,n,r,d)){m=!1;break}}return d.delete(t),d.delete(e),m}var o=n(147),i=n(65),s=n(150),a=1,u=2;t.exports=r},function(t,e,n){var r=n(2),o=r.Uint8Array;t.exports=o},function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}t.exports=n},function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}t.exports=n},function(t,e,n){function r(t){return o(t,s,i)}var o=n(73),i=n(43),s=n(5);t.exports=r},function(t,e,n){function r(t,e,n){var r=e(t);return i(t)?r:o(r,n(t))}var o=n(42),i=n(1);t.exports=r},function(t,e){function n(){return[]}t.exports=n},function(t,e,n){var r=n(154),o=n(40),i=n(155),s=n(156),a=n(157),u=n(11),c=n(66),d=c(r),h=c(o),f=c(i),l=c(s),p=c(a),v=u;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case d:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case l:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){function r(t){return t===t&&!o(t)}var o=n(3);t.exports=r},function(t,e){function n(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}t.exports=n},function(t,e,n){function r(t,e){var n=-1,r=i(t)?Array(t.length):[];return o(t,function(t,o,i){r[++n]=e(t,o,i)}),r}var o=n(34),i=n(7);t.exports=r},function(t,e){function n(t){return function(){return t}}t.exports=n},function(t,e,n){var r=n(9),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){function r(t){if("number"==typeof t)return t;if(i(t))return s;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=c.test(t);return n||d.test(t)?h(t.slice(2),n?2:8):u.test(t)?s:+t}var o=n(3),i=n(14),s=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt;t.exports=r},function(t,e,n){function r(t){var e=o(t),n=e%1;return e===e?n?e-n:e:0}var o=n(83);t.exports=r},function(t,e,n){function r(t){if(!t)return 0===t?t:0;if((t=o(t))===i||t===-i){return(t<0?-1:1)*s}return t===t?t:0}var o=n(81),i=1/0,s=1.7976931348623157e308;t.exports=r},function(t,e,n){function r(t){var e=t.length;return e?t[o(0,e-1)]:void 0}var o=n(48);t.exports=r},function(t,e,n){function r(t){return null==t?[]:o(t,i(t))}var o=n(198),i=n(5);t.exports=r},function(t,e,n){function r(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var s=o(n,i),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var o=n(48);t.exports=r},function(t,e,n){function r(t,e,n){var r=t[e];a.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||o(t,e,n)}var o=n(50),i=n(17),s=Object.prototype,a=s.hasOwnProperty;t.exports=r},function(t,e,n){(function(t){function r(t,e){if(e)return t.slice();var n=t.length,r=c?c(n):new t.constructor(n);return t.copy(r),r}var o=n(2),i="object"==typeof e&&e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i,u=a?o.Buffer:void 0,c=u?u.allocUnsafe:void 0;t.exports=r}).call(e,n(35)(t))},function(t,e,n){var r=n(42),o=n(51),i=n(43),s=n(74),a=Object.getOwnPropertySymbols,u=a?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:s;t.exports=u},function(t,e){function n(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}t.exports=n},function(t,e,n){function r(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var o=n(52);t.exports=r},function(t,e,n){function r(t){return"function"!=typeof t.constructor||s(t)?{}:o(i(t))}var o=n(220),i=n(51),s=n(38);t.exports=r},function(t,e,n){function r(t,e,n){(void 0===n||i(t[e],n))&&(void 0!==n||e in t)||o(t,e,n)}var o=n(50),i=n(17);t.exports=r},function(t,e,n){function r(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var u=null==n?0:s(n);return u<0&&(u=a(r+u,0)),o(t,i(e,3),u)}var o=n(236),i=n(13),s=n(82),a=Math.max;t.exports=r},function(t,e,n){"use strict";var r=n(32),o=["beforeAll","afterAll"],i={on:function(t,e,n){var r=this._events[t]||[];return r.push({callback:e,once:n}),this._events[t]=r,this},once:function(t,e){return this.on(t,e,!0)},off:function(t,e){if(void 0===t)this._events={};else if(void 0===e)this._events[t]=[];else{var n,r=this._events[t]||[];for(n=r.length-1;n>=0;n--)r[n].callback===e&&r.splice(n,1)}return this},emit:function(t){var e,n,r,i,s=[].slice.call(arguments,1),a=this._events[t]||[],u=[],c=-1!==o.indexOf(t);for(c||this.emit.apply(this,["beforeAll",t].concat(s)),e=0;e<a.length;e++)n=a[e],n.callback?i=n.callback.apply(this,s):n.once=!0,n.once&&u.push(e),void 0!==i&&(r=i);for(e=u.length-1;e>=0;e--)a.splice(u[e],1);return c||this.emit.apply(this,["afterAll",t].concat(s)),r},trigger:function(){return r.warn(!1,"Method `trigger` is deprecated and will be removed from freezer in upcoming releases. Please use `emit`."),this.emit.apply(this,arguments)}},s=r.createNonEnumerable(i);t.exports=s},function(t,e,n){!function(n,r){void 0!==t&&t.exports&&(e=t.exports=r(n,e))}(this,function(t,e){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=e);n<e;n++)if(n in this&&this[n]===t)return n;return-1}),e.prefix="",e._getPrefixedKey=function(t,e){return e=e||{},e.noPrefix?t:this.prefix+t},e.set=function(t,e,n){var r=this._getPrefixedKey(t,n);try{localStorage.setItem(r,JSON.stringify({data:e}))}catch(n){console&&console.warn("Lockr didn't successfully save the '{"+t+": "+e+"}' pair, because the localStorage is full.")}},e.get=function(t,e,n){var r,o=this._getPrefixedKey(t,n);try{r=JSON.parse(localStorage.getItem(o))}catch(e){try{r=localStorage[o]?JSON.parse('{"data":"'+localStorage.getItem(o)+'"}'):null}catch(e){console&&console.warn("Lockr could not load the item with key "+t)}}return null===r?e:void 0!==r.data?r.data:e},e.sadd=function(t,n,r){var o,i=this._getPrefixedKey(t,r),s=e.smembers(t);if(s.indexOf(n)>-1)return null;try{s.push(n),o=JSON.stringify({data:s}),localStorage.setItem(i,o)}catch(e){console.log(e),console&&console.warn("Lockr didn't successfully add the "+n+" to "+t+" set, because the localStorage is full.")}},e.smembers=function(t,e){var n,r=this._getPrefixedKey(t,e);try{n=JSON.parse(localStorage.getItem(r))}catch(t){n=null}return null===n?[]:n.data||[]},e.sismember=function(t,n,r){this._getPrefixedKey(t,r);return e.smembers(t).indexOf(n)>-1},e.getAll=function(){return Object.keys(localStorage).map(function(t){return e.get(t)})},e.srem=function(t,n,r){var o,i,s=this._getPrefixedKey(t,r),a=e.smembers(t,n);i=a.indexOf(n),i>-1&&a.splice(i,1),o=JSON.stringify({data:a});try{localStorage.setItem(s,o)}catch(e){console&&console.warn("Lockr couldn't remove the "+n+" from the set "+t)}},e.rm=function(t){localStorage.removeItem(t)},e.flush=function(){localStorage.clear()},e})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(20),o=function(){function t(){this.isActive=!1,this.state=0}return t.prototype.doClick=function(){this.onClick&&this.onClick(),r.a("gui:click-button")},t.prototype.init=function(t,e){var n=this;this.sge=t,this.container=new PIXI.Container,this.text=new PIXI.extras.BitmapText(""+e,{font:"24px defaultfont",align:"left"}),this.text.anchor=new PIXI.Point(0,0),this.container.addChild(this.text),this.container.buttonMode=!0,this.container.interactive=!0,this.container.on("mouseover",function(){n.state=1,n.onOver&&n.onOver(n)}),this.container.on("mousemove",function(){n.state>0&&n.onOver&&n.onOver(n)}),this.container.on("mouseout",function(){n.state=0}),this.container.on("mousedown",function(){n.state=2}),this.container.on("mouseup",function(){n.state=1,n.doClick()}),this.container.hitArea=new PIXI.Rectangle(0,0,400,50)},t.prototype.setActive=function(t){this.isActive=t},t.prototype.update=function(t,e){this.container.x=t,this.isActive,this.container.y=e,this.text.x=100,this.text.y=14},t}()},function(t,e,n){"use strict";function r(){return{spawn:null,blobs:[],hats:[],hatCounters:[],buttons:[],texts:[],decors:[]}}function o(t,e,n){return t==e*g+n}function i(t,e,n,r,o,i){console.log("load map",o),h.b.forEach(o.layers,function(i){console.log("processing layer",i.name,i),"Background"===i.name&&s(o,t,e,n,r,i.data),"Background-Decor"===i.name&&a(o,t,e,n,r,i.data),"Wall"===i.name&&u(o,t,e,n,r,i.data),"Decor"===i.name&&c(o,t,e,n,r,i.data),"Marker"===i.name&&d(o,t,e,n,r,i.data)})}function s(t,e,n,r,o,i){Object(f.a)(t,e,n,r,p,i,function(t){return t},function(t,e){})}function a(t,e,n,r,o,i){Object(f.a)(t,e,n,r,v,i,function(t){return t},function(t,e){})}function u(t,e,n,r,i,s){Object(f.a)(t,e,n,r,m,s,null,function(t,e){t.canMove=e<=1,o(e,6,4)&&(t.hatCountHide=1),o(e,6,5)&&(t.hatCountHide=10),o(e,6,6)&&(t.hatCountHide=20),o(e,6,7)&&(t.hatCountHide=30),o(e,6,8)&&(t.hatCountHide=40),o(e,6,9)&&(t.hatCountHide=50),o(e,7,3)&&(t.fatal=!0),o(e,7,4)&&(t.hatCountShow=1,t.fatal=!0),o(e,7,5)&&(t.hatCountShow=10,t.fatal=!0),o(e,7,6)&&(t.hatCountShow=20,t.fatal=!0),o(e,7,7)&&(t.hatCountShow=30,t.fatal=!0),o(e,7,8)&&(t.hatCountShow=40,t.fatal=!0),o(e,7,9)&&(t.hatCountShow=50,t.fatal=!0),o(e,4,7)&&(t.hideBossButtonPressed=!0,t.canMove=!1),o(e,4,9)&&(t.hideBossDefeated=!0,t.canMove=!1),o(e,4,11)&&(t.hideMidButtonPressed=!0,t.canMove=!1),o(e,14,5)&&(console.log("hit hat c",e),i.hatCounters.push({bx:t.bx,by:t.by,data:{type:"hat"}})),o(e,15,4)&&(console.log("hit hat c",e),i.hatCounters.push({bx:t.bx,by:t.by,data:{type:"lava"}}))})}function c(t,e,n,r,o,i){Object(f.a)(t,e,n,r,b,i,null,function(t,e){})}function d(t,e,n,r,i,s){Object(f.a)(t,e,n,r,y,s,null,function(t,e,n,r){e>1&&(o(e,1,2)?(console.log("marker hit spawn",e),i.spawn={bx:t.bx,by:t.by}):o(e,4,1)?(console.log("marker hit blob",e),i.blobs.push({bx:t.bx,by:t.by})):o(e,2,1)?(console.log("marker hit hat",e),i.hats.push({bx:t.bx,by:t.by})):o(e,5,6)?(console.log("marker hit button1",e),i.buttons.push({bx:t.bx,by:t.by,data:{buttonType:l.a}})):o(e,5,8)?(console.log("marker hit button 2",e),i.buttons.push({bx:t.bx,by:t.by,data:{buttonType:l.d}})):o(e,5,10)?(console.log("marker hit button 3",e),i.buttons.push({bx:t.bx,by:t.by,data:{buttonType:l.c}})):o(e,15,5)?(console.log("marker hit text",e),i.texts.push({bx:t.bx,by:t.by,data:{text:"wasd or arrows to move and jump"}})):o(e,15,6)?(console.log("marker hit text",e),i.texts.push({bx:t.bx,by:t.by,data:{text:"collect hats to change blocks"}})):o(e,15,7)?(console.log("marker hit text",e),i.texts.push({bx:t.bx,by:t.by,data:{text:"Press button to WIN"}})):o(e,15,8)?(console.log("space throws hats",e),i.texts.push({bx:t.bx,by:t.by,data:{text:"space throws hats"}})):o(e,15,9)?(console.log("space throws hats",e),i.texts.push({bx:t.bx,by:t.by,data:{text:"warning: more hats, more problems"}})):o(e,15,10)?(console.log("space throws hats",e),i.texts.push({bx:t.bx,by:t.by,data:{text:"good job! halfway there!"}})):o(e,2,13)?i.decors.push({bx:t.bx,by:t.by,data:{idx:0}}):o(e,3,13)?i.decors.push({bx:t.bx,by:t.by,data:{idx:1}}):o(e,4,13)?i.decors.push({bx:t.bx,by:t.by,data:{idx:2}}):o(e,1,13)?i.decors.push({bx:t.bx,by:t.by,data:{idx:3}}):console.warn("marker UNKNOWN",e))})}n.d(e,"a",function(){return p}),n.d(e,"b",function(){return v}),n.d(e,"e",function(){return m}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return y}),n.d(e,"f",function(){return _}),e.g=r,e.h=i;var h=n(0),f=n(270),l=n(99),p=0,v=1,m=2,b=3,y=4,_=5,g=32},function(t,e,n){"use strict";n.d(e,"d",function(){return c}),n.d(e,"c",function(){return d}),n.d(e,"a",function(){return h}),n.d(e,"b",function(){return f});var r=n(0),o=n(4),i=n(16),s=(Math.PI,o.b(5,6,2)),a=o.b(5,8,2),u=o.b(5,10,2),c=0,d=2,h=1,f=function(){function t(){this.items=[]}return t.prototype.init=function(t){this.context=t},t.prototype.createAt=function(t,e){var n=new l;return n.init(this.context),n.moveTo(t,e),this.items.push(n),this.context.layerObjects.addChild(n.container),n},t.prototype.update=function(){r.b.forEach(this.items,function(t){t.update()}),this.destroyMarked()},t.prototype.destroyMarked=function(){var t=this,e=r.b.remove(this.items,function(t){return t.isReadyToBeDestroyed});e.length>0&&(r.b.forEach(e,function(e){t.context.layerObjects.removeChild(e.container)}),console.log("cleaning up "+e.length+" items - "+this.items.length+" left"))},t.prototype.clear=function(){var t=this;r.b.forEach(this.items,function(e){e.isReadyToBeDestroyed=!0,t.context.layerObjects.removeChild(e.container)}),this.items=[]},t.prototype.drawBounds=function(t){r.b.forEach(this.items,function(e){t.draw(e.bounds)})},t}(),l=function(){function t(){this.container=new PIXI.Container,this.isPressed=!1,this.framesSincePressed=0,this.bounds=new i.a,this.buttonType=0,this.isReadyToBeDestroyed=!1}return t.prototype.init=function(t){this.context=t,this.body=o.c(this.context.sge,"ase-512-16",4,1),this.body.anchor.set(.5,1),this.container.addChild(this.body)},t.prototype.destroy=function(){this.isReadyToBeDestroyed||(this.isReadyToBeDestroyed=!0,this.context.sounds.playSmash())},t.prototype.update=function(){this.isReadyToBeDestroyed||(this.isPressed&&++this.framesSincePressed>180&&(this.isPressed=!1,this.framesSincePressed=0),this.buttonType===h?this.body.texture.frame=s[this.isPressed?1:0]:this.buttonType===c?this.body.texture.frame=a[this.isPressed?1:0]:this.buttonType===d&&(this.body.texture.frame=u[this.isPressed?1:0]),this.bounds.update(this.context),this.container.position.set(this.bounds.x,this.bounds.y))},t.prototype.moveTo=function(t,e){this.bounds.moveTo(t,e)},t}()},function(t,e,n){t.exports=n(101)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(102).a()},function(t,e,n){"use strict";function r(){a.b("ludum-dare-40-v003"),c.preloadAudioSprites(["audioSprite"]),c.preloadBitmapFonts(["defaultfont"]),c.preloadSprites(["test-ship","prariesnailgames"]),c.preloadSpriteSheets(["test-tileset","gui-tileset","ase-512-16"]),c.preloadTiledMaps(["map-start","map-01-001","map-01-002","map-01-003","map-01-004","map-01-005","map-01-006","map-01-007","map-01-008","map-01-009","map-mid","map-boss","map-end"]),c.preloadPackedSprites([])}function o(){function t(){c.onUpdateCallback=e,u.load(c),d.onLoaded(c),c.startGameLoop()}function e(){d.onUpdate()}console.log("Running ludum dare start sample"),c.init(),c.createRenderer();c.stage,c.renderer;r(),c.preload("/public/ludumDare40",function(){t()}),window.onresize=function(){c.resize()}}e.a=o;var i=n(103),s=n(243),a=n(33),u=n(15),c=(PIXI.Rectangle,PIXI.Sprite,PIXI.utils.TextureCache,new i.a),d=new s.a},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(55),o=n(0),i=n(10),s=function(){function t(){this.pixiMode="unknown",this.renderer=null,this.stage=null,this.loader=null,this.keyboard=new i.b,this._preloadBitmapFonts=[],this._preloadSprites=[],this._preloadSpritesheets=[],this._preloadTiledMaps=[],this._preloadAudioSprites=[],this._preloadPackedSprites=[],this.frameNum=0,this.frameNumThisInterval=0,this.framesPerSecond=null,this.lastPerfStart=0,this.lastPerfMid=0,this.lastPerfEnd=0,this.perfStart=0,this.perfMid=0,this.perfEnd=0,this.frameLoads=[],this.frameMaxLoad=0,this.frameAverageLoad=0,this.onUpdateCallback=null}return t.prototype.init=function(){console.log("starting SGE");var t="WebGL";PIXI.utils.isWebGLSupported()||(t="canvas"),PIXI.utils.sayHello(t),this.keyboard.init(),console.log("started SGE")},t.prototype.resize=function(){if(this.renderer){var t=window,e=document,n=e.documentElement,r=e.getElementsByTagName("body")[0],o=t.innerWidth||n.clientWidth||r.clientWidth,i=t.innerHeight||n.clientHeight||r.clientHeight;this.renderer.resize(o,i)}},t.prototype.createRenderer=function(){var t=this.renderer=PIXI.autoDetectRenderer(256,256,{antialias:!1,transparent:!1,resolution:1});this.renderer instanceof PIXI.CanvasRenderer?this.pixiMode="canvas":this.pixiMode="openGl",t.view.style.position="absolute",t.view.style.display="block",t.autoResize=!0,t.resize(window.innerWidth,window.innerHeight);var e=document.getElementById("game-root");e?e.appendChild(t.view):document.body.appendChild(t.view);var n=this.stage=new PIXI.Container;return t.render(n),t},t.prototype.getViewSize=function(){var t=this.renderer;return{width:t.width,height:t.height}},t.prototype.addGroup=function(t){this.stage.addChild(t)},t.prototype.preloadBitmapFonts=function(t){var e=this;o.b.forEach(t,function(t){e._preloadBitmapFonts.push(t)})},t.prototype.preloadSprites=function(t){var e=this;o.b.forEach(t,function(t){e._preloadSprites.push(t)})},t.prototype.preloadSpriteSheets=function(t){var e=this;o.b.forEach(t,function(t){e._preloadSpritesheets.push(t)})},t.prototype.preloadTiledMaps=function(t){var e=this;o.b.forEach(t,function(t){e._preloadTiledMaps.push(t)})},t.prototype.preloadAudioSprites=function(t){var e=this;o.b.forEach(t,function(t){e._preloadAudioSprites.push(t)})},t.prototype.preloadPackedSprites=function(t){var e=this;o.b.forEach(t,function(t){e._preloadPackedSprites.push(t)})},t.prototype.preload=function(t,e){var n=this,r=(this.loadingMessage=new PIXI.Text("Loading...",{fontFamily:"Arial",fontSize:64,fill:"white"}),this.loader=new PIXI.loaders.Loader);r.on("progress",function(t,e){n.onloaderProgress(t,e)}),o.b.forEach(this._preloadAudioSprites,function(e){r.add(e,t+"/sounds/"+e+".json")}),o.b.forEach(this._preloadBitmapFonts,function(e){r.add(e,t+"/fonts/"+e+".fnt.xml")}),o.b.forEach(this._preloadSprites,function(e){r.add(e,t+"/images/"+e+".png")}),o.b.forEach(this._preloadSpritesheets,function(e){r.add(e,t+"/images/"+e+".png")}),o.b.forEach(this._preloadTiledMaps,function(e){r.add(e,t+"/maps/"+e+".json")}),o.b.forEach(this._preloadPackedSprites,function(e){r.add(e+"-json",t+"/images-packed/"+e+".json"),r.add(e,t+"/images-packed/"+e+".png")}),r.load(function(){o.b.forEach(n._preloadSpritesheets,function(t){n.loader.resources[t].texture.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST}),n.loadingMessage.visible=!1;var t=n.frameRateText=new PIXI.extras.BitmapText("",{font:"16px defaultfont"});t.position.set(0,2),n.stage.addChild(t),e()})},t.prototype.onloaderProgress=function(t,e){var n=Math.floor(t.progress)+"% - "+e.url;console.log("loading",n),this.loadingMessage.text=n,this.renderer.render(this.stage)},t.prototype.getJson=function(t){console.log("get json",t);var e=this.loader.resources[t];return r.a(e,"json not loaded "+t),r.a(e.data,"is not json "+t),e.data},t.prototype.getTexture=function(t){var e=this.loader.resources[t];return r.a(e,"tex not loaded "+t),r.a(e.texture,"is not tex "+t),e.texture},t.prototype.startGameLoop=function(){var t=this;this.frameRateStart=(new Date).getTime(),requestAnimationFrame(function(){t.gameLoop()})},t.prototype.gameLoop=function(){var t=this;this.lastPerfStart=this.perfStart,this.lastPerfMid=this.perfMid,this.lastPerfEnd=this.perfEnd;var e=(this.lastPerfMid,this.lastPerfStart,this.lastPerfEnd-this.lastPerfStart),n=e;this.frameLoads.push(n),requestAnimationFrame(function(){t.gameLoop()}),this.perfStart=performance.now(),this.keyboard.onUpdate(),this.frameNum++,this.frameNumThisInterval++;this.frameRateText.text=(this.framesPerSecond||"--")+" | "+Object(o.c)(this.frameAverageLoad/16.6).format("0%")+" | "+Object(o.c)(this.frameMaxLoad/16.6).format("0%")+" | "+Object(o.c)(this.frameMaxLoad).format("0")+"ms | "+this.frameNum%60+" "+(this.frameMaxLoad/16.6>.5?"WARNING":"")+" ",this.onUpdate();var r=(new Date).getTime();r-this.frameRateStart>=2e3&&(this.framesPerSecond=Math.floor(this.frameNumThisInterval*(r-this.frameRateStart)/1e3/2/2),this.frameNumThisInterval=0,this.frameRateStart=r,this.frameMaxLoad=o.b.max(this.frameLoads),this.frameAverageLoad=o.b.mean(this.frameLoads),this.frameLoads=[]),this.perfMid=performance.now(),this.renderer.render(this.stage),this.perfEnd=performance.now()},t.prototype.onUpdate=function(){this.onUpdateCallback&&this.onUpdateCallback()},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return R});var r=n(105),o=n.n(r),i=n(117),s=n.n(i),a=n(173),u=n.n(a),c=n(174),d=n.n(c),h=n(186),f=n.n(h),l=n(188),p=n.n(l),v=n(79),m=n.n(v),b=n(189),y=n.n(b),_=n(190),g=n.n(_),x=n(196),w=n.n(x),P=n(199),M=n.n(P),A=n(202),I=n.n(A),T=n(221),j=n.n(T),S=n(224),k=n.n(S),B=n(227),O=n.n(B),C=n(234),F=n.n(C),E=n(94),D=n.n(E),R={forEach:o.a,some:s.a,map:u.a,sortBy:d.a,delay:f.a,times:p.a,constant:m.a,random:y.a,remove:g.a,sample:w.a,shuffle:M.a,clone:I.a,max:j.a,mean:k.a,merge:O.a,find:F.a,findIndex:D.a}},function(t,e,n){function r(t,e){return(a(t)?o:i)(t,s(e))}var o=n(56),i=n(34),s=n(64),a=n(1);t.exports=r},function(t,e,n){function r(t,e){return t&&o(t,e,i)}var o=n(57),i=n(5);t.exports=r},function(t,e){function n(t){return function(e,n,r){for(var o=-1,i=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++o];if(!1===n(i[u],u,i))break}return e}}t.exports=n},function(t,e,n){function r(t){return i(t)&&o(t)==s}var o=n(11),i=n(6),s="[object Arguments]";t.exports=r},function(t,e,n){function r(t){var e=s.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}var o=n(12),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,u=o?o.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return o.call(t)}var r=Object.prototype,o=r.toString;t.exports=n},function(t,e){function n(){return!1}t.exports=n},function(t,e,n){function r(t){return s(t)&&i(t.length)&&!!a[o(t)]}var o=n(11),i=n(37),s=n(6),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){(function(t){var r=n(60),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o,a=s&&r.process,u=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=u}).call(e,n(35)(t))},function(t,e,n){function r(t){if(!o(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}var o=n(38),i=n(115),s=Object.prototype,a=s.hasOwnProperty;t.exports=r},function(t,e,n){var r=n(63),o=r(Object.keys,Object);t.exports=o},function(t,e,n){function r(t,e){return function(n,r){if(null==n)return n;if(!o(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&!1!==r(a[s],s,a););return n}}var o=n(7);t.exports=r},function(t,e,n){function r(t,e,n){var r=a(t)?o:s;return n&&u(t,e,n)&&(e=void 0),r(t,i(e,3))}var o=n(65),i=n(13),s=n(172),a=n(1),u=n(30);t.exports=r},function(t,e,n){function r(t){var e=i(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(n){return n===t||o(n,t,e)}}var o=n(119),i=n(158),s=n(77);t.exports=r},function(t,e,n){function r(t,e,n,r){var u=n.length,c=u,d=!r;if(null==t)return!c;for(t=Object(t);u--;){var h=n[u];if(d&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++u<c;){h=n[u];var f=h[0],l=t[f],p=h[1];if(d&&h[2]){if(void 0===l&&!(f in t))return!1}else{var v=new o;if(r)var m=r(l,p,f,t,e,v);if(!(void 0===m?i(p,l,s|a,r,v):m))return!1}}return!0}var o=n(24),i=n(67),s=1,a=2;t.exports=r},function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},function(t,e,n){function r(t){var e=this.__data__,n=o(e,t);return!(n<0)&&(n==e.length-1?e.pop():s.call(e,n,1),--this.size,!0)}var o=n(26),i=Array.prototype,s=i.splice;t.exports=r},function(t,e,n){function r(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]}var o=n(26);t.exports=r},function(t,e,n){function r(t){return o(this.__data__,t)>-1}var o=n(26);t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var o=n(26);t.exports=r},function(t,e,n){function r(){this.__data__=new o,this.size=0}var o=n(25);t.exports=r},function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=n},function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<a-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(r)}return n.set(t,e),this.size=n.size,this}var o=n(25),i=n(40),s=n(41),a=200;t.exports=r},function(t,e,n){function r(t){return!(!s(t)||i(t))&&(o(t)?p:c).test(a(t))}var o=n(39),i=n(131),s=n(3),a=n(66),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,d=Function.prototype,h=Object.prototype,f=d.toString,l=h.hasOwnProperty,p=RegExp("^"+f.call(l).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){function r(t){return!!i&&i in t}var o=n(132),i=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e,n){var r=n(2),o=r["__core-js_shared__"];t.exports=o},function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},function(t,e,n){function r(){this.size=0,this.__data__={hash:new o,map:new(s||i),string:new o}}var o=n(135),i=n(25),s=n(40);t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(136),i=n(137),s=n(138),a=n(139),u=n(140);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,t.exports=r},function(t,e,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(27);t.exports=r},function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},function(t,e,n){function r(t){var e=this.__data__;if(o){var n=e[t];return n===i?void 0:n}return a.call(e,t)?e[t]:void 0}var o=n(27),i="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){var e=this.__data__;return o?void 0!==e[t]:s.call(e,t)}var o=n(27),i=Object.prototype,s=i.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?i:e,this}var o=n(27),i="__lodash_hash_undefined__";t.exports=r},function(t,e,n){function r(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}var o=n(28);t.exports=r},function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},function(t,e,n){function r(t){return o(this,t).get(t)}var o=n(28);t.exports=r},function(t,e,n){function r(t){return o(this,t).has(t)}var o=n(28);t.exports=r},function(t,e,n){function r(t,e){var n=o(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var o=n(28);t.exports=r},function(t,e,n){function r(t,e,n,r,m,y){var _=c(t),g=c(e),x=_?p:u(t),w=g?p:u(e);x=x==l?v:x,w=w==l?v:w;var P=x==v,M=w==v,A=x==w;if(A&&d(t)){if(!d(e))return!1;_=!0,P=!1}if(A&&!P)return y||(y=new o),_||h(t)?i(t,e,n,r,m,y):s(t,e,x,n,r,m,y);if(!(n&f)){var I=P&&b.call(t,"__wrapped__"),T=M&&b.call(e,"__wrapped__");if(I||T){var j=I?t.value():t,S=T?e.value():e;return y||(y=new o),m(j,S,n,r,y)}}return!!A&&(y||(y=new o),a(t,e,n,r,m,y))}var o=n(24),i=n(68),s=n(151),a=n(152),u=n(75),c=n(1),d=n(22),h=n(36),f=1,l="[object Arguments]",p="[object Array]",v="[object Object]",m=Object.prototype,b=m.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new o;++e<n;)this.add(t[e])}var o=n(41),i=n(148),s=n(149);r.prototype.add=r.prototype.push=i,r.prototype.has=s,t.exports=r},function(t,e){function n(t){return this.__data__.set(t,r),this}var r="__lodash_hash_undefined__";t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e){function n(t,e){return t.has(e)}t.exports=n},function(t,e,n){function r(t,e,n,r,o,P,A){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!P(new i(t),new i(e)));case f:case l:case m:return s(+t,+e);case p:return t.name==e.name&&t.message==e.message;case b:case _:return t==e+"";case v:var I=u;case y:var T=r&d;if(I||(I=c),t.size!=e.size&&!T)return!1;var j=A.get(t);if(j)return j==e;r|=h,A.set(t,e);var S=a(I(t),I(e),r,o,P,A);return A.delete(t),S;case g:if(M)return M.call(t)==M.call(e)}return!1}var o=n(12),i=n(69),s=n(17),a=n(68),u=n(70),c=n(71),d=1,h=2,f="[object Boolean]",l="[object Date]",p="[object Error]",v="[object Map]",m="[object Number]",b="[object RegExp]",y="[object Set]",_="[object String]",g="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",P=o?o.prototype:void 0,M=P?P.valueOf:void 0;t.exports=r},function(t,e,n){function r(t,e,n,r,s,u){var c=n&i,d=o(t),h=d.length;if(h!=o(e).length&&!c)return!1;for(var f=h;f--;){var l=d[f];if(!(c?l in e:a.call(e,l)))return!1}var p=u.get(t);if(p&&u.get(e))return p==e;var v=!0;u.set(t,e),u.set(e,t);for(var m=c;++f<h;){l=d[f];var b=t[l],y=e[l];if(r)var _=c?r(y,b,l,e,t,u):r(b,y,l,t,e,u);if(!(void 0===_?b===y||s(b,y,n,r,u):_)){v=!1;break}m||(m="constructor"==l)}if(v&&!m){var g=t.constructor,x=e.constructor;g!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof x&&x instanceof x)&&(v=!1)}return u.delete(t),u.delete(e),v}var o=n(72),i=1,s=Object.prototype,a=s.hasOwnProperty;t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}t.exports=n},function(t,e,n){var r=n(9),o=n(2),i=r(o,"DataView");t.exports=i},function(t,e,n){var r=n(9),o=n(2),i=r(o,"Promise");t.exports=i},function(t,e,n){var r=n(9),o=n(2),i=r(o,"Set");t.exports=i},function(t,e,n){var r=n(9),o=n(2),i=r(o,"WeakMap");t.exports=i},function(t,e,n){function r(t){for(var e=i(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,o(s)]}return e}var o=n(76),i=n(5);t.exports=r},function(t,e,n){function r(t,e){return a(t)&&u(e)?c(d(t),e):function(n){var r=i(n,t);return void 0===r&&r===e?s(n,t):o(e,r,h|f)}}var o=n(67),i=n(160),s=n(166),a=n(46),u=n(76),c=n(77),d=n(18),h=1,f=2;t.exports=r},function(t,e,n){function r(t,e,n){var r=null==t?void 0:o(t,e);return void 0===r?n:r}var o=n(44);t.exports=r},function(t,e,n){var r=n(162),o=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=r(function(t){var e=[];return o.test(t)&&e.push(""),t.replace(i,function(t,n,r,o){e.push(r?o.replace(s,"$1"):n||t)}),e});t.exports=a},function(t,e,n){function r(t){var e=o(t,function(t){return n.size===i&&n.clear(),t}),n=e.cache;return e}var o=n(163),i=500;t.exports=r},function(t,e,n){function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(r.Cache||o),n}var o=n(41),i="Expected a function";r.Cache=o,t.exports=r},function(t,e,n){function r(t){return null==t?"":o(t)}var o=n(165);t.exports=r},function(t,e,n){function r(t){if("string"==typeof t)return t;if(s(t))return i(t,r)+"";if(a(t))return d?d.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var o=n(12),i=n(29),s=n(1),a=n(14),u=1/0,c=o?o.prototype:void 0,d=c?c.toString:void 0;t.exports=r},function(t,e,n){function r(t,e){return null!=t&&i(t,e,o)}var o=n(167),i=n(168);t.exports=r},function(t,e){function n(t,e){return null!=t&&e in Object(t)}t.exports=n},function(t,e,n){function r(t,e,n){e=o(e,t);for(var r=-1,d=e.length,h=!1;++r<d;){var f=c(e[r]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++r!=d?h:!!(d=null==t?0:t.length)&&u(d)&&a(f,d)&&(s(t)||i(t))}var o=n(45),i=n(21),s=n(1),a=n(23),u=n(37),c=n(18);t.exports=r},function(t,e,n){function r(t){return s(t)?o(a(t)):i(t)}var o=n(170),i=n(171),s=n(46),a=n(18);t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},function(t,e,n){function r(t){return function(e){return o(e,t)}}var o=n(44);t.exports=r},function(t,e,n){function r(t,e){var n;return o(t,function(t,r,o){return!(n=e(t,r,o))}),!!n}var o=n(34);t.exports=r},function(t,e,n){function r(t,e){return(a(t)?o:s)(t,i(e,3))}var o=n(29),i=n(13),s=n(78),a=n(1);t.exports=r},function(t,e,n){var r=n(175),o=n(177),i=n(47),s=n(30),a=i(function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),o(t,r(e,1),[])});t.exports=a},function(t,e,n){function r(t,e,n,s,a){var u=-1,c=t.length;for(n||(n=i),a||(a=[]);++u<c;){var d=t[u];e>0&&n(d)?e>1?r(d,e-1,n,s,a):o(a,d):s||(a[a.length]=d)}return a}var o=n(42),i=n(176);t.exports=r},function(t,e,n){function r(t){return s(t)||i(t)||!!(a&&t&&t[a])}var o=n(12),i=n(21),s=n(1),a=o?o.isConcatSpreadable:void 0;t.exports=r},function(t,e,n){function r(t,e,n){var r=-1;e=o(e.length?e:[d],u(i));var h=s(t,function(t,n,i){return{criteria:o(e,function(e){return e(t)}),index:++r,value:t}});return a(h,function(t,e){return c(t,e,n)})}var o=n(29),i=n(13),s=n(78),a=n(178),u=n(62),c=n(179),d=n(8);t.exports=r},function(t,e){function n(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}t.exports=n},function(t,e,n){function r(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,a=i.length,u=n.length;++r<a;){var c=o(i[r],s[r]);if(c){if(r>=u)return c;return c*("desc"==n[r]?-1:1)}}return t.index-e.index}var o=n(180);t.exports=r},function(t,e,n){function r(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t===t,s=o(t),a=void 0!==e,u=null===e,c=e===e,d=o(e);if(!u&&!d&&!s&&t>e||s&&a&&c&&!u&&!d||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!d&&t<e||d&&n&&i&&!r&&!s||u&&n&&i||!a&&i||!c)return-1}return 0}var o=n(14);t.exports=r},function(t,e,n){function r(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var r=arguments,s=-1,a=i(r.length-e,0),u=Array(a);++s<a;)u[s]=r[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=r[s];return c[e]=n(u),o(t,this,c)}}var o=n(182),i=Math.max;t.exports=r},function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},function(t,e,n){var r=n(184),o=n(185),i=o(r);t.exports=i},function(t,e,n){var r=n(79),o=n(80),i=n(8),s=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=s},function(t,e){function n(t){var e=0,n=0;return function(){var s=i(),a=o-(s-n);if(n=s,a>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;t.exports=n},function(t,e,n){var r=n(187),o=n(47),i=n(81),s=o(function(t,e,n){return r(t,i(e)||0,n)});t.exports=s},function(t,e){function n(t,e,n){if("function"!=typeof t)throw new TypeError(r);return setTimeout(function(){t.apply(void 0,n)},e)}var r="Expected a function";t.exports=n},function(t,e,n){function r(t,e){if((t=s(t))<1||t>a)return[];var n=u,r=c(t,u);e=i(e),t-=u;for(var d=o(r,e);++n<t;)e(n);return d}var o=n(59),i=n(64),s=n(82),a=9007199254740991,u=4294967295,c=Math.min;t.exports=r},function(t,e,n){function r(t,e,n){if(n&&"boolean"!=typeof n&&i(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=s(t),void 0===e?(e=t,t=0):e=s(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var d=c();return u(t+d*(e-t+a("1e-"+((d+"").length-1))),e)}return o(t,e)}var o=n(48),i=n(30),s=n(83),a=parseFloat,u=Math.min,c=Math.random;t.exports=r},function(t,e,n){function r(t,e){var n=[];if(!t||!t.length)return n;var r=-1,s=[],a=t.length;for(e=o(e,3);++r<a;){var u=t[r];e(u,r,t)&&(n.push(u),s.push(r))}return i(t,s),n}var o=n(13),i=n(191);t.exports=r},function(t,e,n){function r(t,e){for(var n=t?e.length:0,r=n-1;n--;){var s=e[n];if(n==r||s!==u){var u=s;i(s)?a.call(t,s,1):o(t,s)}}return t}var o=n(192),i=n(23),s=Array.prototype,a=s.splice;t.exports=r},function(t,e,n){function r(t,e){return e=o(e,t),null==(t=s(t,e))||delete t[a(i(e))]}var o=n(45),i=n(193),s=n(194),a=n(18);t.exports=r},function(t,e){function n(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}t.exports=n},function(t,e,n){function r(t,e){return e.length<2?t:o(t,i(e,0,-1))}var o=n(44),i=n(195);t.exports=r},function(t,e){function n(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}t.exports=n},function(t,e,n){function r(t){return(s(t)?o:i)(t)}var o=n(84),i=n(197),s=n(1);t.exports=r},function(t,e,n){function r(t){return o(i(t))}var o=n(84),i=n(85);t.exports=r},function(t,e,n){function r(t,e){return o(e,function(e){return t[e]})}var o=n(29);t.exports=r},function(t,e,n){function r(t){return(s(t)?o:i)(t)}var o=n(200),i=n(201),s=n(1);t.exports=r},function(t,e,n){function r(t){return i(o(t))}var o=n(49),i=n(86);t.exports=r},function(t,e,n){function r(t){return o(i(t))}var o=n(86),i=n(85);t.exports=r},function(t,e,n){function r(t){return o(t,i)}var o=n(203),i=4;t.exports=r},function(t,e,n){function r(t,e,n,B,O,C){var F,E=e&P,D=e&M,R=e&A;if(n&&(F=O?n(t,B,O,C):n(t)),void 0!==F)return F;if(!x(t))return t;var L=_(t);if(L){if(F=m(t),!E)return d(t,F)}else{var X=v(t),G=X==T||X==j;if(g(t))return c(t,E);if(X==S||X==I||G&&!O){if(F=D||G?{}:y(t),!E)return D?f(t,u(F,t)):h(t,a(F,t))}else{if(!k[X])return O?t:{};F=b(t,X,r,E)}}C||(C=new o);var H=C.get(t);if(H)return H;C.set(t,F);var N=R?D?p:l:D?keysIn:w,z=L?void 0:N(t);return i(z||t,function(o,i){z&&(i=o,o=t[i]),s(F,i,r(o,e,n,i,t,C))}),F}var o=n(24),i=n(56),s=n(87),a=n(204),u=n(205),c=n(88),d=n(49),h=n(208),f=n(209),l=n(72),p=n(210),v=n(75),m=n(211),b=n(212),y=n(92),_=n(1),g=n(22),x=n(3),w=n(5),P=1,M=2,A=4,I="[object Arguments]",T="[object Function]",j="[object GeneratorFunction]",S="[object Object]",k={};k[I]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[S]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[T]=k["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){function r(t,e){return t&&o(e,i(e),t)}var o=n(19),i=n(5);t.exports=r},function(t,e,n){function r(t,e){return t&&o(e,i(e),t)}var o=n(19),i=n(31);t.exports=r},function(t,e,n){function r(t){if(!o(t))return s(t);var e=i(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}var o=n(3),i=n(38),s=n(207),a=Object.prototype,u=a.hasOwnProperty;t.exports=r},function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},function(t,e,n){function r(t,e){return o(t,i(t),e)}var o=n(19),i=n(43);t.exports=r},function(t,e,n){function r(t,e){return o(t,i(t),e)}var o=n(19),i=n(89);t.exports=r},function(t,e,n){function r(t){return o(t,s,i)}var o=n(73),i=n(89),s=n(31);t.exports=r},function(t,e){function n(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,o=r.hasOwnProperty;t.exports=n},function(t,e,n){function r(t,e,n,r){var k=t.constructor;switch(e){case _:return o(t);case h:case f:return new k(+t);case g:return i(t,r);case x:case w:case P:case M:case A:case I:case T:case j:case S:return d(t,r);case l:return s(t,r,n);case p:case b:return new k(t);case v:return a(t);case m:return u(t,r,n);case y:return c(t)}}var o=n(52),i=n(213),s=n(214),a=n(216),u=n(217),c=n(219),d=n(91),h="[object Boolean]",f="[object Date]",l="[object Map]",p="[object Number]",v="[object RegExp]",m="[object Set]",b="[object String]",y="[object Symbol]",_="[object ArrayBuffer]",g="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",P="[object Int8Array]",M="[object Int16Array]",A="[object Int32Array]",I="[object Uint8Array]",T="[object Uint8ClampedArray]",j="[object Uint16Array]",S="[object Uint32Array]";t.exports=r},function(t,e,n){function r(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var o=n(52);t.exports=r},function(t,e,n){function r(t,e,n){var r=e?n(s(t),a):s(t);return i(r,o,new t.constructor)}var o=n(215),i=n(90),s=n(70),a=1;t.exports=r},function(t,e){function n(t,e){return t.set(e[0],e[1]),t}t.exports=n},function(t,e){function n(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}var r=/\w*$/;t.exports=n},function(t,e,n){function r(t,e,n){var r=e?n(s(t),a):s(t);return i(r,o,new t.constructor)}var o=n(218),i=n(90),s=n(71),a=1;t.exports=r},function(t,e){function n(t,e){return t.add(e),t}t.exports=n},function(t,e,n){function r(t){return s?Object(s.call(t)):{}}var o=n(12),i=o?o.prototype:void 0,s=i?i.valueOf:void 0;t.exports=r},function(t,e,n){var r=n(3),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){function r(t){return t&&t.length?o(t,s,i):void 0}var o=n(222),i=n(223),s=n(8);t.exports=r},function(t,e,n){function r(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(null!=a&&(void 0===u?a===a&&!o(a):n(a,u)))var u=a,c=s}return c}var o=n(14);t.exports=r},function(t,e){function n(t,e){return t>e}t.exports=n},function(t,e,n){function r(t){return o(t,i)}var o=n(225),i=n(8);t.exports=r},function(t,e,n){function r(t,e){var n=null==t?0:t.length;return n?o(t,e)/n:i}var o=n(226),i=NaN;t.exports=r},function(t,e){function n(t,e){for(var n,r=-1,o=t.length;++r<o;){var i=e(t[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}t.exports=n},function(t,e,n){var r=n(228),o=n(233),i=o(function(t,e,n){r(t,e,n)});t.exports=i},function(t,e,n){function r(t,e,n,d,h){t!==e&&s(e,function(s,c){if(u(s))h||(h=new o),a(t,e,c,n,r,d,h);else{var f=d?d(t[c],s,c+"",t,e,h):void 0;void 0===f&&(f=s),i(t,c,f)}},c)}var o=n(24),i=n(93),s=n(57),a=n(229),u=n(3),c=n(31);t.exports=r},function(t,e,n){function r(t,e,n,r,y,_,g){var x=t[n],w=e[n],P=g.get(w);if(P)return void o(t,n,P);var M=_?_(x,w,n+"",t,e,g):void 0,A=void 0===M;if(A){var I=d(w),T=!I&&f(w),j=!I&&!T&&m(w);M=w,I||T||j?d(x)?M=x:h(x)?M=a(x):T?(A=!1,M=i(w,!0)):j?(A=!1,M=s(w,!0)):M=[]:v(w)||c(w)?(M=x,c(x)?M=b(x):(!p(x)||r&&l(x))&&(M=u(w))):A=!1}A&&(g.set(w,M),y(M,w,r,_,g),g.delete(w)),o(t,n,M)}var o=n(93),i=n(88),s=n(91),a=n(49),u=n(92),c=n(21),d=n(1),h=n(230),f=n(22),l=n(39),p=n(3),v=n(231),m=n(36),b=n(232);t.exports=r},function(t,e,n){function r(t){return i(t)&&o(t)}var o=n(7),i=n(6);t.exports=r},function(t,e,n){function r(t){if(!s(t)||o(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==f}var o=n(11),i=n(51),s=n(6),a="[object Object]",u=Function.prototype,c=Object.prototype,d=u.toString,h=c.hasOwnProperty,f=d.call(Object);t.exports=r},function(t,e,n){function r(t){return o(t,i(t))}var o=n(19),i=n(31);t.exports=r},function(t,e,n){function r(t){return o(function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e})}var o=n(47),i=n(30);t.exports=r},function(t,e,n){var r=n(235),o=n(94),i=r(o);t.exports=i},function(t,e,n){function r(t){return function(e,n,r){var a=Object(e);if(!i(e)){var u=o(n,3);e=s(e),n=function(t){return u(a[t],t,a)}}var c=t(e,n,r);return c>-1?a[u?e[c]:c]:void 0}}var o=n(13),i=n(7),s=n(5);t.exports=r},function(t,e){function n(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}t.exports=n},function(t,e,n){var r,o;/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
!function(i,s){r=s,void 0!==(o="function"==typeof r?r.call(e,n,e,t):r)&&(t.exports=o)}(0,function(){function t(t,e){this._input=t,this._value=e}var e,n,r={},o={},i={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},s={currentLocale:i.currentLocale,zeroFormat:i.zeroFormat,nullFormat:i.nullFormat,defaultFormat:i.defaultFormat,scalePercentBy100:i.scalePercentBy100};return e=function(o){var i,a,u,c;if(e.isNumeral(o))i=o.value();else if(0===o||void 0===o)i=0;else if(null===o||n.isNaN(o))i=null;else if("string"==typeof o)if(s.zeroFormat&&o===s.zeroFormat)i=0;else if(s.nullFormat&&o===s.nullFormat||!o.replace(/[^0-9]+/g,"").length)i=null;else{for(a in r)if((c="function"==typeof r[a].regexps.unformat?r[a].regexps.unformat():r[a].regexps.unformat)&&o.match(c)){u=r[a].unformat;break}u=u||e._.stringToNumber,i=u(o)}else i=Number(o)||null;return new t(o,i)},e.version="2.0.6",e.isNumeral=function(e){return e instanceof t},e._=n={numberToFormat:function(t,n,r){var i,s,a,u,c,d,h,f=o[e.options.currentLocale],l=!1,p=!1,v=0,m="",b="",y=!1;if(t=t||0,s=Math.abs(t),e._.includes(n,"(")?(l=!0,n=n.replace(/[\(|\)]/g,"")):(e._.includes(n,"+")||e._.includes(n,"-"))&&(c=e._.includes(n,"+")?n.indexOf("+"):t<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),e._.includes(n,"a")&&(i=n.match(/a(k|m|b|t)?/),i=!!i&&i[1],e._.includes(n," a")&&(m=" "),n=n.replace(new RegExp(m+"a[kmbt]?"),""),s>=1e12&&!i||"t"===i?(m+=f.abbreviations.trillion,t/=1e12):s<1e12&&s>=1e9&&!i||"b"===i?(m+=f.abbreviations.billion,t/=1e9):s<1e9&&s>=1e6&&!i||"m"===i?(m+=f.abbreviations.million,t/=1e6):(s<1e6&&s>=1e3&&!i||"k"===i)&&(m+=f.abbreviations.thousand,t/=1e3)),e._.includes(n,"[.]")&&(p=!0,n=n.replace("[.]",".")),a=t.toString().split(".")[0],u=n.split(".")[1],d=n.indexOf(","),v=(n.split(".")[0].split(",")[0].match(/0/g)||[]).length,u?(e._.includes(u,"[")?(u=u.replace("]",""),u=u.split("["),b=e._.toFixed(t,u[0].length+u[1].length,r,u[1].length)):b=e._.toFixed(t,u.length,r),a=b.split(".")[0],b=e._.includes(b,".")?f.delimiters.decimal+b.split(".")[1]:"",p&&0===Number(b.slice(1))&&(b="")):a=e._.toFixed(t,0,r),m&&!i&&Number(a)>=1e3&&m!==f.abbreviations.trillion)switch(a=String(Number(a)/1e3),m){case f.abbreviations.thousand:m=f.abbreviations.million;break;case f.abbreviations.million:m=f.abbreviations.billion;break;case f.abbreviations.billion:m=f.abbreviations.trillion}if(e._.includes(a,"-")&&(a=a.slice(1),y=!0),a.length<v)for(var _=v-a.length;_>0;_--)a="0"+a;return d>-1&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f.delimiters.thousands)),0===n.indexOf(".")&&(a=""),h=a+b+(m||""),l?h=(l&&y?"(":"")+h+(l&&y?")":""):c>=0?h=0===c?(y?"-":"+")+h:h+(y?"-":"+"):y&&(h="-"+h),h},stringToNumber:function(t){var e,n,r,i=o[s.currentLocale],a=t,u={thousand:3,million:6,billion:9,trillion:12};if(s.zeroFormat&&t===s.zeroFormat)n=0;else if(s.nullFormat&&t===s.nullFormat||!t.replace(/[^0-9]+/g,"").length)n=null;else{n=1,"."!==i.delimiters.decimal&&(t=t.replace(/\./g,"").replace(i.delimiters.decimal,"."));for(e in u)if(r=new RegExp("[^a-zA-Z]"+i.abbreviations[e]+"(?:\\)|(\\"+i.currency.symbol+")?(?:\\))?)?$"),a.match(r)){n*=Math.pow(10,u[e]);break}n*=(t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1,t=t.replace(/[^0-9\.]+/g,""),n*=Number(t)}return n},isNaN:function(t){return"number"==typeof t&&isNaN(t)},includes:function(t,e){return-1!==t.indexOf(e)},insert:function(t,e,n){return t.slice(0,n)+e+t.slice(n)},reduce:function(t,e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,r=Object(t),o=r.length>>>0,i=0;if(3===arguments.length)n=arguments[2];else{for(;i<o&&!(i in r);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[i++]}for(;i<o;i++)i in r&&(n=e(n,r[i],i,r));return n},multiplier:function(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce(function(t,e){var r=n.multiplier(e);return t>r?t:r},1)},toFixed:function(t,e,n,r){var o,i,s,a,u=t.toString().split("."),c=e-(r||0);return o=2===u.length?Math.min(Math.max(u[1].length,c),e):c,s=Math.pow(10,o),a=(n(t+"e+"+o)/s).toFixed(o),r>e-o&&(i=new RegExp("\\.?0{1,"+(r-(e-o))+"}$"),a=a.replace(i,"")),a}},e.options=s,e.formats=r,e.locales=o,e.locale=function(t){return t&&(s.currentLocale=t.toLowerCase()),s.currentLocale},e.localeData=function(t){if(!t)return o[s.currentLocale];if(t=t.toLowerCase(),!o[t])throw new Error("Unknown locale : "+t);return o[t]},e.reset=function(){for(var t in i)s[t]=i[t]},e.zeroFormat=function(t){s.zeroFormat="string"==typeof t?t:null},e.nullFormat=function(t){s.nullFormat="string"==typeof t?t:null},e.defaultFormat=function(t){s.defaultFormat="string"==typeof t?t:"0.0"},e.register=function(t,e,n){if(e=e.toLowerCase(),this[t+"s"][e])throw new TypeError(e+" "+t+" already registered.");return this[t+"s"][e]=n,n},e.validate=function(t,n){var r,o,i,s,a,u,c,d;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),t=t.trim(),t.match(/^\d+$/))return!0;if(""===t)return!1;try{c=e.localeData(n)}catch(t){c=e.localeData(e.locale())}return i=c.currency.symbol,a=c.abbreviations,r=c.delimiters.decimal,o="."===c.delimiters.thousands?"\\.":c.delimiters.thousands,(null===(d=t.match(/^[^\d]+/))||(t=t.substr(1),d[0]===i))&&((null===(d=t.match(/[^\d]+$/))||(t=t.slice(0,-1),d[0]===a.thousand||d[0]===a.million||d[0]===a.billion||d[0]===a.trillion))&&(u=new RegExp(o+"{2}"),!t.match(/[^\d.,]/g)&&(s=t.split(r),!(s.length>2)&&(s.length<2?!!s[0].match(/^\d+.*\d$/)&&!s[0].match(u):1===s[0].length?!!s[0].match(/^\d+$/)&&!s[0].match(u)&&!!s[1].match(/^\d+$/):!!s[0].match(/^\d+.*\d$/)&&!s[0].match(u)&&!!s[1].match(/^\d+$/)))))},e.fn=t.prototype={clone:function(){return e(this)},format:function(t,n){var o,i,a,u=this._value,c=t||s.defaultFormat;if(n=n||Math.round,0===u&&null!==s.zeroFormat)i=s.zeroFormat;else if(null===u&&null!==s.nullFormat)i=s.nullFormat;else{for(o in r)if(c.match(r[o].regexps.format)){a=r[o].format;break}a=a||e._.numberToFormat,i=a(u,c,n)}return i},value:function(){return this._value},input:function(){return this._input},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e,n,o){return t+Math.round(r*e)}var r=n.correctionFactor.call(null,this._value,t);return this._value=n.reduce([this._value,t],e,0)/r,this},subtract:function(t){function e(t,e,n,o){return t-Math.round(r*e)}var r=n.correctionFactor.call(null,this._value,t);return this._value=n.reduce([t],e,Math.round(this._value*r))/r,this},multiply:function(t){function e(t,e,r,o){var i=n.correctionFactor(t,e);return Math.round(t*i)*Math.round(e*i)/Math.round(i*i)}return this._value=n.reduce([this._value,t],e,1),this},divide:function(t){function e(t,e,r,o){var i=n.correctionFactor(t,e);return Math.round(t*i)/Math.round(e*i)}return this._value=n.reduce([this._value,t],e),this},difference:function(t){return Math.abs(e(this._value).subtract(t).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),function(){e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,n,r){var o,i=e._.includes(n," BPS")?" ":"";return t*=1e4,n=n.replace(/\s?BPS/,""),o=e._.numberToFormat(t,n,r),e._.includes(o,")")?(o=o.split(""),o.splice(-1,0,i+"BPS"),o=o.join("")):o=o+i+"BPS",o},unformat:function(t){return+(1e-4*e._.stringToNumber(t)).toFixed(15)}})}(),function(){var t={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},n={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},r=t.suffixes.concat(n.suffixes.filter(function(e){return t.suffixes.indexOf(e)<0})),o=r.join("|");o="("+o.replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(r,o,i){var s,a,u,c=e._.includes(o,"ib")?n:t,d=e._.includes(o," b")||e._.includes(o," ib")?" ":"";for(o=o.replace(/\s?i?b/,""),s=0;s<=c.suffixes.length;s++)if(a=Math.pow(c.base,s),u=Math.pow(c.base,s+1),null===r||0===r||r>=a&&r<u){d+=c.suffixes[s],a>0&&(r/=a);break}return e._.numberToFormat(r,o,i)+d},unformat:function(r){var o,i,s=e._.stringToNumber(r);if(s){for(o=t.suffixes.length-1;o>=0;o--){if(e._.includes(r,t.suffixes[o])){i=Math.pow(t.base,o);break}if(e._.includes(r,n.suffixes[o])){i=Math.pow(n.base,o);break}}s*=i||1}return s}})}(),function(){e.register("format","currency",{regexps:{format:/(\$)/},format:function(t,n,r){var o,i,s=e.locales[e.options.currentLocale],a={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),o=e._.numberToFormat(t,n,r),t>=0?(a.before=a.before.replace(/[\-\(]/,""),a.after=a.after.replace(/[\-\)]/,"")):t<0&&!e._.includes(a.before,"-")&&!e._.includes(a.before,"(")&&(a.before="-"+a.before),i=0;i<a.before.length;i++)switch(a.before[i]){case"$":o=e._.insert(o,s.currency.symbol,i);break;case" ":o=e._.insert(o," ",i+s.currency.symbol.length-1)}for(i=a.after.length-1;i>=0;i--)switch(a.after[i]){case"$":o=i===a.after.length-1?o+s.currency.symbol:e._.insert(o,s.currency.symbol,-(a.after.length-(1+i)));break;case" ":o=i===a.after.length-1?o+" ":e._.insert(o," ",-(a.after.length-(1+i)+s.currency.symbol.length-1))}return o}})}(),function(){e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,n,r){var o="number"!=typeof t||e._.isNaN(t)?"0e+0":t.toExponential(),i=o.split("e");return n=n.replace(/e[\+|\-]{1}0/,""),e._.numberToFormat(Number(i[0]),n,r)+"e"+i[1]},unformat:function(t){function n(t,n,r,o){var i=e._.correctionFactor(t,n);return t*i*(n*i)/(i*i)}var r=e._.includes(t,"e+")?t.split("e+"):t.split("e-"),o=Number(r[0]),i=Number(r[1]);return i=e._.includes(t,"e-")?i*=-1:i,e._.reduce([o,Math.pow(10,i)],n,1)}})}(),function(){e.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,n,r){var o=e.locales[e.options.currentLocale],i=e._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),i+=o.ordinal(t),e._.numberToFormat(t,n,r)+i}})}(),function(){e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,n,r){var o,i=e._.includes(n," %")?" ":"";return e.options.scalePercentBy100&&(t*=100),n=n.replace(/\s?\%/,""),o=e._.numberToFormat(t,n,r),e._.includes(o,")")?(o=o.split(""),o.splice(-1,0,i+"%"),o=o.join("")):o=o+i+"%",o},unformat:function(t){var n=e._.stringToNumber(t);return e.options.scalePercentBy100?.01*n:n}})}(),function(){e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(t,e,n){var r=Math.floor(t/60/60),o=Math.floor((t-60*r*60)/60),i=Math.round(t-60*r*60-60*o);return r+":"+(o<10?"0"+o:o)+":"+(i<10?"0"+i:i)},unformat:function(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}})}(),e})},function(t,e,n){var r=n(239);t.exports=r},function(t,e,n){"use strict";function r(t){o.warn(!1,"Method "+t.name+" called on a detached node.",t.node,t.options)}var o=n(32),i=(n(95),n(241)),s=function(t,e){var n,s,a=this,u=e||{},c={live:u.live||!1,freezeInstances:u.freezeInstances||!1},d=[],h=0,f=function(t){var e,n=t.__;if(n.listener){var r=n.listener.prevState||t;n.listener.prevState=0,i.emit(r,"update",t,!0)}for(e=0;e<n.parents.length;e++)n.store.notify("now",n.parents[e])},l=function(t){d.push(t),h||(h=1,o.nextTick(function(){d=[],h=0}))};c.notify=function(t,e,n,a){if(a&&(s&&!s.onStore&&r(s),s={name:a,node:e,options:n,onStore:!1}),"now"===t){if(d.length)for(;d.length;)f(d.shift());else f(e);return e}var u=i[t](e,n);if("pivot"!==t){var c=o.findPivot(u);if(c)return l(u),c}return u},c.freezeFn=!0===u.mutable?function(){}:function(t){Object.freeze(t)},n=i.freeze(t,c),n.__.updateRoot=function(t,e){t===n?(n=e,s&&(s.onStore=!0)):s&&setTimeout(function(){s.onStore||r(s)})};var p=n.getListener(),v={};o.each(["on","off","once","emit","trigger"],function(t){var e={};e[t]=p[t].bind(p),o.addNE(a,e),o.addNE(v,e)}),o.addNE(this,{get:function(){return n},set:function(t){n.reset(t)},getEventHub:function(){return v}}),o.addNE(this,{getData:this.get,setData:this.set})};t.exports=s},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(d===setTimeout)return setTimeout(t,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch(e){try{return d.call(null,t,0)}catch(e){return d.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){v&&l&&(v=!1,l.length?p=l.concat(p):m=-1,p.length&&a())}function a(){if(!v){var t=o(s);v=!0;for(var e=p.length;e;){for(l=p,p=[];++m<e;)l&&l[m].run();m=-1,e=p.length}l=null,v=!1,i(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var d,h,f=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(t){d=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var l,p=[],v=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||v||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(32),o=n(242),i=n(95),s={freeze:function(t,e){if(t&&t.__)return t;var n=this,i=o.clone(t);return r.addNE(i,{__:{listener:!1,parents:[],store:e}}),r.each(t,function(t,o){r.isLeaf(t,e.freezeInstances)||(t=n.freeze(t,e)),t&&t.__&&n.addParent(t,i),i[o]=t}),e.freezeFn(i),i},merge:function(t,e){var n=t.__,o=n.trans,e=r.extend({},e);if(o){for(var i in e)o[i]=e[i];return t}var s,a,u,c=this,d=this.copyMeta(t),h=n.store;r.each(t,function(n,o){if(u=n&&n.__,u&&c.removeParent(n,t),!(s=e[o]))return u&&c.addParent(n,d),d[o]=n;r.isLeaf(s,h.freezeInstances)||(s=c.freeze(s,h)),s&&s.__&&c.addParent(s,d),delete e[o],d[o]=s});for(a in e)s=e[a],r.isLeaf(s,h.freezeInstances)||(s=c.freeze(s,h)),s&&s.__&&c.addParent(s,d),d[a]=s;return n.store.freezeFn(d),this.refreshParents(t,d),d},replace:function(t,e){var n=this,o=t.__,i=e;return r.isLeaf(e,o.store.freezeInstances)||(i=n.freeze(e,o.store),i.__.parents=o.parents,i.__.updateRoot=o.updateRoot,o.listener&&(i.__.listener=o.listener)),i&&this.fixChildren(i,t),this.refreshParents(t,i),i},remove:function(t,e){var n=t.__.trans;if(n){for(var o=e.length-1;o>=0;o--)delete n[e[o]];return t}var i,s=this,a=this.copyMeta(t);return r.each(t,function(n,r){i=n&&n.__,i&&s.removeParent(n,t),-1===e.indexOf(r)&&(i&&s.addParent(n,a),a[r]=n)}),t.__.store.freezeFn(a),this.refreshParents(t,a),a},splice:function(t,e){var n=t.__,o=n.trans;if(o)return o.splice.apply(o,e),t;var i,s=this,a=this.copyMeta(t),u=e[0],c=u+e[1];if(r.each(t,function(e,n){e&&e.__&&(s.removeParent(e,t),(n<u||n>=c)&&s.addParent(e,a)),a[n]=e}),e.length>1)for(var d=e.length-1;d>=2;d--)i=e[d],r.isLeaf(i,n.store.freezeInstances)||(i=this.freeze(i,n.store)),i&&i.__&&this.addParent(i,a),e[d]=i;return Array.prototype.splice.apply(a,e),n.store.freezeFn(a),this.refreshParents(t,a),a},transact:function(t){var e,n=this,o=t.__.trans;return o||(e=t.constructor===Array?[]:{},r.each(t,function(t,n){e[n]=t}),t.__.trans=e,r.nextTick(function(){t.__.trans&&n.run(t)}),e)},run:function(t){var e=this,n=t.__.trans;return n?(r.each(n,function(n,r){n&&n.__&&e.removeParent(n,t)}),delete t.__.trans,this.replace(t,n)):t},pivot:function(t){return t.__.pivot=1,this.unpivot(t),t},unpivot:function(t){r.nextTick(function(){t.__.pivot=0})},refresh:function(t,e,n){var o=this,i=t.__.trans,s=0;if(i)return r.each(i,function(r,a){s||r===e&&(i[a]=n,s=1,n&&n.__&&o.addParent(n,t))}),t;var a,u=this.copyMeta(t);r.each(t,function(r,i){r===e&&(r=n),r&&(a=r.__)&&(o.removeParent(r,t),o.addParent(r,u)),u[i]=r}),t.__.store.freezeFn(u),this.refreshParents(t,u)},fixChildren:function(t,e){var n=this;r.each(t,function(r){if(r&&r.__){if(n.fixChildren(r),1===r.__.parents.length)return r.__.parents=[t];e&&n.removeParent(r,e),n.addParent(r,t)}})},copyMeta:function(t){var e=o.clone(t),n=t.__;return r.addNE(e,{__:{store:n.store,updateRoot:n.updateRoot,listener:n.listener,parents:n.parents.slice(0),trans:n.trans,pivot:n.pivot}}),n.pivot&&this.unpivot(e),e},refreshParents:function(t,e){var n,r=t.__,o=r.parents.length;if(t.__.updateRoot&&t.__.updateRoot(t,e),e&&this.emit(t,"update",e,r.store.live),o)for(n=o-1;n>=0;n--)this.refresh(r.parents[n],t,e)},removeParent:function(t,e){var n=t.__.parents,r=n.indexOf(e);-1!==r&&n.splice(r,1)},addParent:function(t,e){var n=t.__.parents;-1===n.indexOf(e)&&(n[n.length]=e)},emit:function(t,e,n,o){var i=t.__.listener;if(i){var s=i.ticking;if(o)return void((s||n)&&(i.ticking=0,i.emit(e,s||n,t)));i.ticking=n,i.prevState||(i.prevState=t),s||r.nextTick(function(){if(i.ticking){var n=i.ticking;i.prevState;i.ticking=0,i.prevState=0,i.emit(e,n,t)}})}},createListener:function(t){var e=t.__.listener;return e||(e=Object.create(i,{_events:{value:{},writable:!0}}),t.__.listener=e),e}};o.init(s),t.exports=s},function(t,e,n){"use strict";var r=n(32),o={init:function(t){var e={set:function(t,e){var n=t,o=this.__.trans,i=this.constructor===Array,s="Freezer arrays only accept numeric attributes, given: ";if("object"!=typeof t){if(i&&parseInt(t)!=t)return r.warn(0,s+t),r.findPivot(this)||this;n={},n[t]=e}if(!o){for(var a in n){if(i&&parseInt(a)!=a)return r.warn(0,s+a),r.findPivot(this)||this;o=o||this[a]!==n[a]}if(!o)return r.findPivot(this)||this}var u=i?"array.set":"object.set";return this.__.store.notify("merge",this,n,u)},reset:function(t){return this.__.store.notify("replace",this,t,"object.replace")},getListener:function(){return t.createListener(this)},toJS:function(){var t;return t=this.constructor===Array?new Array(this.length):{},r.each(this,function(e,n){e&&e.__?t[n]=e.toJS():t[n]=e}),t},transact:function(){return this.__.store.notify("transact",this)},run:function(){return this.__.store.notify("run",this)},now:function(){return this.__.store.notify("now",this)},pivot:function(){return this.__.store.notify("pivot",this)}},n=r.extend({push:function(t){return this.append([t],"array.push")},append:function(t,e){return t&&t.length?this.__.store.notify("splice",this,[this.length,0].concat(t),e||"array.append"):this},pop:function(){return this.length?this.__.store.notify("splice",this,[this.length-1,1],"array.pop"):this},unshift:function(t){return this.prepend([t],"array.unshift")},prepend:function(t){return t&&t.length?this.__.store.notify("splice",this,[0,0].concat(t),"array.prepend"):this},shift:function(){return this.length?this.__.store.notify("splice",this,[0,1],"array.shift"):this},splice:function(t,e,n){return this.__.store.notify("splice",this,arguments,"array.splice")},sort:function(){var t=this.slice();return t.sort.apply(t,arguments),this.__.store.notify("replace",this,t,"array.sort")}},e),o=Object.create(Array.prototype,r.createNE(n)),i=r.createNE(r.extend({remove:function(t){var e=[],n=t;t.constructor!==Array&&(n=[t]);for(var r=0,o=n.length;r<o;r++)this.hasOwnProperty(n[r])&&e.push(n[r]);return e.length?this.__.store.notify("remove",this,e,"object.remove"):this}},e)),s=Object.create(Object.prototype,i),a=function(){return[].__proto__?function(t){var e=new Array(t);return e.__proto__=o,e}:function(t){var e=new Array(t);for(var r in n)e[r]=n[r];return e}}();this.clone=function(t){var e=t.constructor;return e===Array?a(t.length):e===Object?Object.create(s):Object.create(e.prototype,i)}}};t.exports=o},function(t,e,n){"use strict";n.d(e,"a",function(){return M});var r=n(0),o=n(244),i=n(245),s=n(246),a=n(260),u=n(261),c=n(264),d=n(265),h=n(266),f=n(268),l=n(269),p=n(98),v=n(15),m=n(271),b=n(10),y=n(272),_=n(99),g=n(273),x=n(274),w=n(275),P=n(276),M=(PIXI.Rectangle,PIXI.Sprite,PIXI.utils.TextureCache,Math.PI,function(){function t(){this.tileMap=null,this.mapScanner=new m.a,this.menuManager=new s.a,this.sounds=v,this.rootContainer=new PIXI.Container,this.rootContainerUI=new PIXI.Container,this.layerDecor=new PIXI.Container,this.layerObjects=new PIXI.Container,this.layerParticles=new PIXI.Container,this.layerBounds=new PIXI.Container,this.particles=new h.a,this.boundsDrawer=new f.a,this.blobs=new c.a,this.hats=new d.a,this.hatCounters=new y.a,this.buttons=new _.b,this.texts=new g.a,this.bossHeads=new x.a,this.decors=new w.a,this.achievements=new P.a,this.pressedBossButton=!1,this.pressedMidButton=!1,this.defeatedBoss=!1,this.hatCount=0}return t.prototype.onLoaded=function(t){var e=this;this.sge=t,t.renderer.transparent=!1,t.renderer.backgroundColor=4281545523,this.menuManager.init(this.sge),this.rootContainer.visible=!1,this.rootContainerUI.visible=!1,this.splash=new a.a,this.splash.init(this.sge,"prariesnailgames",function(){e.rootContainer.visible=!0,e.rootContainerUI.visible=!0}),this.particles.init(this.sge),this.blobs.init(this),this.hats.init(this),this.hatCounters.init(this),this.buttons.init(this),this.texts.init(this),this.bossHeads.init(this),this.decors.init(this),this.achievements.init(this),this.player=new u.a,this.player.init(this),this.reset(),this.addLayer(this.tileMap.containers[p.a]),this.addLayer(this.tileMap.containers[p.b]),this.addLayer(this.tileMap.containers[p.e]),this.addLayer(this.layerDecor),this.addLayer(this.layerObjects),this.addLayer(this.tileMap.containers[p.c]),this.layerMarkers=this.addLayer(this.tileMap.containers[p.d]),this.layerMarkers.visible=!1,this.addLayer(this.layerParticles),this.layerParticles.addChild(this.particles.container),this.addLayer(this.layerBounds),this.layerBounds.visible=!1,this.boundsDrawer.init(this),this.layerBounds.addChild(this.boundsDrawer.container),this.addLayerUI(this.menuManager.menuManager.container),this.addLayerUI(this.menuManager.container),this.layerObjects.addChild(this.player.container),this.sge.stage.addChild(this.rootContainer),this.rootContainer.scale.set(4),this.rootContainer.position.set(0,400),this.sge.stage.addChild(this.rootContainerUI),this.sge.stage.addChild(this.splash.container),this.rootContainer.scale},t.prototype.getPlayerHatCount=function(){return this.hatCount},t.prototype.getPlayerLavaCount=function(){return this.player.followers.length-1},t.prototype.addLayer=function(t){return void 0===t&&(t=null),t||(t=new PIXI.Container),this.rootContainer.addChild(t),t},t.prototype.addLayerUI=function(t){return void 0===t&&(t=null),t||(t=new PIXI.Container),this.rootContainerUI.addChild(t),t},t.prototype.onUpdate=function(){var t=this;if(this.hatCount=this.player.hats.hats.length,this.hatCount>=100?this.achievements.addAchievement("100 Hat Hatfessional"):this.hatCount>=50?this.achievements.addAchievement("50 Hat Hatsterminator"):this.hatCount>=40?this.achievements.addAchievement("40 Hat Hatiator"):this.hatCount>=30?this.achievements.addAchievement("30 Hat Hatformer"):this.hatCount>=20?this.achievements.addAchievement("20 Hat Novice"):this.hatCount>=10&&this.achievements.addAchievement("10 Hat Newbie"),this.sge.keyboard.justPressed(b.a.r)&&this.reset(),this.sge.keyboard.justPressed(b.a.h))for(var e=0;e<10;e++)this.player.hats.addHat();this.mapScanner.update(this),this.boundsDrawer.clear(),this.splash.update(),this.player.update(),this.player.isDying&&this.player.dyingFrames>180&&this.reset(),this.blobs.update(),this.hats.update(),this.hatCounters.update(),this.buttons.update(),this.texts.update(),this.bossHeads.update(),this.decors.update(),this.achievements.update(this);var n=this.player;r.b.forEach(this.blobs.items,function(e){var r=e;if(l.a(n.bounds,r.bounds))if(n.bounds.boundsY2<r.bounds.boundsY2&&n.bounds.vy>0)if(n.bounds.subY=32*r.bounds.boundsY1-32-16,n.bounds.vy=0,n.bounds.accelY=0,n.bounds.jump(),n.bounds.recalcBounds(),r.hats.hats.length>0){t.achievements.addAchievement("THERE CAN ONLY BE ONE Hatmaster");var o=r.hats.removeTopHat();r.popHat(o,r.hats.hats.length),t.sounds.playSmash()}else 1===r.mode?t.sounds.playMetal():2===r.mode?n.die():r.isReadyToBeDestroyed||r.destroy();else n.die()}),this.defeatedBoss=0===this.bossHeads.items.length,r.b.forEach(this.bossHeads.items,function(e){var r=e;if(l.a(n.bounds,r.bounds))if(n.bounds.boundsY2<r.bounds.boundsY2&&n.bounds.vy>0)if(n.bounds.subY=32*r.bounds.boundsY1-32-16,n.bounds.vy=0,n.bounds.accelY=0,n.bounds.jump(),n.bounds.recalcBounds(),r.bounds.setStateFalling(),r.hats.hats.length>0){var o=r.hats.removeTopHat();r.popHat(o,r.hats.hats.length),t.sounds.playSmash()}else r.isReadyToBeDestroyed||(r.destroy(),t.achievements.addAchievement("Like a boss!"),t.sounds.playSmash(),t.bossHeads.items.length<=1&&t.sounds.playMusicDungeon());else n.die()}),r.b.forEach(this.decors.items,function(e){var o=e;if(l.a(n.bounds,o.bounds)&&!e.isReadyToBeDestroyed){var i=t.hats.createAt(e.bounds.x,e.bounds.y-16);i.bounds.vy=r.b.random(-64,0),i.bounds.vx=r.b.random(-64,64),e.destroy(),3===e.objIndex?(i=t.hats.createAt(e.bounds.x,e.bounds.y-16),i.bounds.vy=r.b.random(-64,0),i.bounds.vx=r.b.random(-64,64),i=t.hats.createAt(e.bounds.x,e.bounds.y-16),i.bounds.vy=r.b.random(-64,0),i.bounds.vx=r.b.random(-64,64),n.addFollower(),t.achievements.addAchievement("Lava lamp hunter!")):t.achievements.addAchievement("Take that environment!")}}),r.b.forEach(this.buttons.items,function(e){var o=e;if(l.a(n.bounds,o.bounds)&&n.bounds.boundsY2<o.bounds.boundsY2&&n.bounds.vy>0&&!o.isPressed)if(o.isPressed=!0,t.sounds.playMetal(),t.achievements.addAchievement("Button pusher!"),o.buttonType===_.a){v.playMusicBoss(),t.pressedBossButton=!0,t.achievements.addAchievement("Time to hat-tack! Amirite?");var i=1+Math.floor(t.getPlayerHatCount()/7);i>10&&(i=10);for(var s=0;s<i;s++)for(var a=t.bossHeads.createAt(o.bounds.x+150-12*s,n.bounds.y),u=r.b.random(0,3,!1),c=0;c<u;c++)a.hats.addHat()}else o.buttonType===_.d?(t.achievements.addAchievement("You won!"),v.playMusicWin()):o.buttonType===_.c&&(t.achievements.addAchievement("Halfway champion!"),v.playMusicDungeon(),t.pressedMidButton=!0)}),r.b.forEach(this.hats.items,function(e){var o=!1;e.frame>30&&(r.b.forEach(t.blobs.items,function(t){o||l.a(e.bounds,t.bounds)&&(t.isReadyToBeDestroyed||(t.hats.addHat(e.body.texture.frame),e.destroy(),o=!0))}),!o&&l.a(n.bounds,e.bounds)&&(e.isReadyToBeDestroyed||(t.achievements.addAchievement("Your baldness: cured!"),t.sounds.playPickup(),n.hats.addHat(e.body.texture.frame),e.destroy(),o=!0)))});var o=this.sge.getViewSize(),i=o.width,s=o.height,a=-this.player.bounds.boundsX1*this.rootContainer.scale.x,u=-this.player.bounds.boundsY1*this.rootContainer.scale.y;this.rootContainer.position.set(a+i/2,u+s/2),this.particles.update(),this.menuManager.update()},t.prototype.reset=function(){var t=this;this.pressedBossButton=!1,this.pressedMidButton=!1,this.defeatedBoss=!1,this.resetTileMap();var e=this.mapMeta.spawn;this.player.reset(),this.player.moveTo(16*e.bx+8,16*e.by+14),this.blobs.clear(),r.b.forEach(this.mapMeta.blobs,function(e){t.blobs.createAt(16*e.bx+8,16*e.by+8)}),this.hats.clear(),r.b.forEach(this.mapMeta.hats,function(e){t.hats.createAt(16*e.bx+8,16*e.by+8)}),this.hatCounters.clear(),r.b.forEach(this.mapMeta.hatCounters,function(e){t.hatCounters.createAt(16*e.bx+8,16*e.by+8).type=e.data.type}),this.buttons.clear(),r.b.forEach(this.mapMeta.buttons,function(e){t.buttons.createAt(16*e.bx+8,16*e.by+8).buttonType=e.data.buttonType}),this.texts.clear(),r.b.forEach(this.mapMeta.texts,function(e){t.texts.createAt(16*e.bx+8,16*e.by+8).text.text=e.data.text}),this.bossHeads.clear(),this.decors.clear(),r.b.forEach(this.mapMeta.decors,function(e){t.decors.createAt(16*e.bx+8,16*e.by+8).objIndex=e.data.idx}),this.achievements.clear()},t.prototype.resetTileMap=function(){if(null===this.tileMap){var t=[];t.push({name:"default",textureName:"ase-512-16",tx:0,ty:0}),this.tileMap=new o.a(this.sge,16,t,p.f,function(t,e,n){return{sprites:t,bx:e,by:n,canMove:!0,hatCountHide:0,hatCountShow:0,fatal:!1,hideBossDefeated:!1,hideBossButtonPressed:!1,hideMidButtonPressed:!1}})}var e=["map-01-001","map-01-002","map-01-003","map-01-008","map-01-005"],n=["map-01-006","map-01-007","map-01-004","map-01-009"],s=e.length+5+n.length,a=e.length+n.length;e=r.b.shuffle(e),n=r.b.shuffle(n),this.mapMeta=p.g();this.tileMap.resize(21*s+2,26);var u=0;p.h(21*u,2,this.tileMap,this.mapMeta,this.sge.getJson("map-start"),{}),u++;for(Math.ceil(a/2);e.length>0;){var c=e.shift(),d=r.b.random(-2,1);p.h(21*u,2+d,this.tileMap,this.mapMeta,this.sge.getJson(c),{}),u++}for(p.h(21*u,2,this.tileMap,this.mapMeta,this.sge.getJson("map-mid"),{}),u++,p.h(21*u,2,this.tileMap,this.mapMeta,this.sge.getJson("map-boss"),{}),u++;n.length>0;){var c=n.shift(),d=r.b.random(-2,2);p.h(21*u,2+d,this.tileMap,this.mapMeta,this.sge.getJson(c),{}),u++}p.h(21*u,2,this.tileMap,this.mapMeta,this.sge.getJson("map-boss"),{}),u++,p.h(21*u,2,this.tileMap,this.mapMeta,this.sge.getJson("map-end"),{}),u++,i.a(this.tileMap,p.e,"_7_3",0,25,21*s+1,1,function(t){t.canMove=!1,t.fatal=!0})},t}())},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(55),o=n(0),i=(PIXI.Rectangle,PIXI.Sprite,PIXI.Container,PIXI.utils.TextureCache),s=function(){function t(t,e,n,r,i){var s=this;this.blockWidth=0,this.blockHeight=0,this.blockSize=0,this.numLayers=0,this.containers=[],this.data=[],this.tileData=[],this.blockSize=e,this.numLayers=r,this.tileData=n,this.gridSpotCreator=i,o.b.forEach(n,function(t){s.tileData[t.name]=t}),this.defaultTile=this.tileData.default||this.tileData[0];this.data;o.b.forEach(o.b.times(r),function(t){s.containers.push(new PIXI.Container)})}return t.prototype.resize=function(t,e){this.blockWidth=t,this.blockHeight=e,o.b.forEach(this.data,function(t){o.b.forEach(t.sprites,function(t){t&&t.destroy()})}),null===this.gridSpotCreator&&(this.gridSpotCreator=function(t,e,n){return{sprites:t,bx:e,by:n,canMove:!0}}),this.data=[];for(var n=0;n<e;n++)for(var r=0;r<t;r++){var i=o.b.times(this.numLayers,o.b.constant(null)),s=this.gridSpotCreator(i,r,n);this.data.push(s)}},t.prototype.update=function(){},t.prototype.setPosition=function(t,e){o.b.forEach(this.containers,function(n){n.position.set(t,e)})},t.prototype.setScale=function(t){o.b.forEach(this.containers,function(e){e.scale.set(t,t)})},t.prototype.inRange=function(t,e){return!(t<0||t>=this.blockWidth)&&!(e<0||e>=this.blockHeight)},t.prototype.wrapX=function(t){return t<0&&(t=this.blockWidth-1),t>this.blockWidth-1&&(t=0),t},t.prototype.wrapY=function(t){return t<0&&(t=this.blockHeight-1),t>this.blockHeight-1&&(t=0),t},t.prototype.clampBoundsX=function(t){return t<0&&(t=0),t>this.blockWidth-1&&(t=this.blockWidth-1),t},t.prototype.clampBoundsY=function(t){return t<0&&(t=0),t>this.blockHeight-1&&(t=this.blockHeight-1),t},t.prototype.addTile=function(t){this.tileData[t.name]=t},t.prototype.hasTile=function(t){return null!=this.tileData[t]},t.prototype.checkInRange=function(t,e){return!(t<0||t>=this.blockWidth)&&!(e<0||e>=this.blockHeight)},t.prototype.safeGetTileAt=function(t,e){return t<0||t>=this.blockWidth?null:e<0||e>=this.blockHeight?null:this.data[e*this.blockWidth+t]},t.prototype.safeGetTileAtWorld=function(t,e){var n=Math.floor(t/this.blockSize),r=Math.floor(e/this.blockSize);return n<0||n>=this.blockWidth?null:r<0||r>=this.blockHeight?null:this.data[r*this.blockWidth+n]},t.prototype.canMoveOn=function(t,e){return!1!==this.checkInRange(t,e)&&this.getTileAt(t,e).canMove},t.prototype.getTileAt=function(t,e){return r.b(t<0||t>=this.blockWidth,"bx out of range: "+t),r.b(e<0||e>=this.blockHeight,"by out of range: "+e),this.data[e*this.blockWidth+t]},t.prototype.setTileAt=function(t,e,n,r){return this.setTileAtEx(t,e,n,r,!1,!1,0)},t.prototype.setTileAtEx=function(t,e,n,o,s,a,u){r.b(e<0||e>=this.blockWidth,"bx out of range: "+e),r.b(n<0||n>=this.blockHeight,"by out of range: "+n);var c=this.data[n*this.blockWidth+e];r.a(c,"gs does not exist "+e+":"+n);var d=this.tileData[o];r.a(d,"tile does not exist "+e+":"+n+":"+o);var h=this.blockSize,f=c.sprites[t];if(null==f){var l=i[this.defaultTile.textureName];f=new PIXI.Sprite(new PIXI.Texture(l.baseTexture)),f.anchor.set(.5);f.position.set(e*h+h/2+.01,n*h+h/2+.01),this.containers[t].addChild(f),c.sprites[t]=f}var p=new PIXI.Rectangle(h*d.tx,h*d.ty,h,h);return f.texture.frame=p,f.visible=!0,f.rotation=u,f.scale.set(s?-1:1,a?-1:1),c},t.prototype.clearTileAt=function(t,e,n){r.b(e<0||e>=this.blockWidth,"bx out of range: "+e),r.b(n<0||n>=this.blockHeight,"by out of range: "+n);var o=this.data[n*this.blockWidth+e];r.a(o,"gs does not exist "+e+":"+n);var i=o.sprites[t];return i&&(i.visible=!1),o},t}()},function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){void 0===a&&(a=null);for(var u=0;u<i;u++)for(var c=0;c<s;c++)t.setTileAt(e,r+u,o+c,n),a&&a(t.getTileAt(r+u,o+c))}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(247),o=n(252),i=n(257),s=n(258),a=n(259),u=n(10),c=n(15),d=function(){function t(){this.currentMenu=null,this.menus=[]}return t.prototype.init=function(t){this.sge=t,this.container=new PIXI.Container,this.container.visible=!1;var e=this.sge.getTexture("test-tileset"),n=new PIXI.Rectangle(96,64,32,32);e.frame=n,this.currentItemIndicator=new PIXI.Sprite(e),this.currentItemIndicator.anchor.set(.5,.5),this.container.addChild(this.currentItemIndicator),this.menuManager=new r.a,this.menuManager.init(t,"ludum-dare-settings-v001"),this.menuTitle=this.addMenu(new o.a),this.menuAbout=this.addMenu(new i.a),this.menuGame=this.addMenu(new s.a),this.menuSoundOptions=this.addMenu(new a.a),this.menuManager.loadSettings()},t.prototype.addMenu=function(t){return t.init(this.sge),this.menuManager.addMenu(t),t},t.prototype.getMode=function(){return this.menuManager.getMode()},t.prototype.update=function(){this.sge.keyboard.justPressed(u.a.escape)&&(this.menuManager.changeMode("title"),c.playMusicMenu()),this.menuManager.update(),this.currentItemIndicator.visible="game"!==this.menuManager.getMode(),this.currentItemIndicator.x=this.menuManager.currentItemX,this.currentItemIndicator.y=this.menuManager.currentItemY},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(0),o=n(20),i=n(248),s=n(33),a=new i.a,u=function(){function t(){this.currentMenu=null,this.menus=[],this.currentItemX=0,this.currentItemY=0}return t.prototype.init=function(t,e){this.sge=t,this.container=new PIXI.Container,a.init(t)},t.prototype.addMenu=function(t){this.menus.push(t)},t.prototype.loadSettings=function(){var t=this;this.changeMode(s.a().menuMode),this.update(),o.b("menu:change-mode",function(e){t.changeMode(e.menuMode)})},t.prototype.getMode=function(){return s.a().menuMode},t.prototype.changeMode=function(t){console.log("new menu mode",t),this.container.removeChildren(),s.c({menuMode:t}),this.currentMenu=r.b.find(this.menus,function(e){return e.modeName===t})||this.menus[0],console.log("mode found",this.currentMenu.modeName,this.menus),this.container.addChild(this.currentMenu.container)},t.prototype.update=function(){a.update(),this.currentMenu.update(a),this.currentMenu.menu&&(this.currentItemX=(this.currentMenu.menu.currentItemX||1)-20,this.currentItemY=(this.currentMenu.menu.currentItemY||1)+25)},t}()},function(t,e,n){"use strict";function r(t,e){Object(s.f)(t.dpad,e),Object(s.d)(t.buttonOk,e,"actionSouth"),t.lastDir=t.dir,t.dir=Object(s.c)(e,t.dpad,.67)}function o(t,e){Object(s.g)(t,e.keyUp,[a.a.w,a.a.arrowUp]),Object(s.g)(t,e.keyDown,[a.a.s,a.a.arrowDown]),Object(s.g)(t,e.keyOk,[a.a.space,a.a.enter])}n.d(e,"a",function(){return c});var i=n(249),s=n(251),a=n(10),u=function(){function t(){this.dir=-1,this.lastDir=-1,this.dpad=new s.b,this.buttonOk=new s.a,this.keyUp=new s.a,this.keyDown=new s.a,this.keyOk=new s.a,this.combinedOk=new s.a}return t}(),c=function(){function t(){this.input=new u}return t.prototype.init=function(t){this.sge=t},t.prototype.update=function(){var t=Object(i.a)();i.b&&t&&t.length>0&&r(this.input,t[0]),o(this.sge,this.input),Object(s.e)(this.input.combinedOk,[this.input.keyOk,this.input.buttonOk])},t}()},function(t,e,n){"use strict";function r(){return s}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var o=n(250),i=new o,s=null;i.onUpdate(function(t){s=i.gamepadConnected?t:null})},function(t,e,n){var r,r;!function(e){t.exports=e()}(function(){return function t(e,n,o){function i(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof r&&r;if(!u&&c)return r(a,!0);if(s)return s(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return i(n||t)},h,h.exports,t,e,n,o)}return n[a].exports}for(var s="function"==typeof r&&r,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){var r;!function(){var t,e,n,o,i,s,a,u,c,d,h,f,l,p,v,m,b,y,_,g="gamepadconnected",x="gamepaddisconnected",w="standard",P="GamepageMicro: ",M=navigator,A=window,I=!1,T=!0,j=console.warn;r=function(){_=this,_.buttonKeys=["actionSouth","actionEast","actionWest","actionNorth","leftBumper","rightBumper","leftTrigger","rightTrigger","select","start","leftStick","rightStick","dPadUp","dPadDown","dPadLeft","dPadRight","extra"],_._ticking=I,_._prevTimestamps=[],_._listening=I,_._updateCallback=function(){},_._prevRawGPTypes=[],_.gamepadConnected=e.length>0,_.gamepadSupported=!!o(),_.gamepads=[],_._heldButtonDelay=200,_._heldTimeByGP={},_._prevPressedByGP={}},t=function(){return{leftStick:{x:0,y:0},rightStick:{x:0,y:0},dPad:{x:0,y:0},buttons:{},_pressed:{},timestamp:0}},o=function(){return M.getGamepads||!!M.webkitGetGamepads||!!M.webkitGamepads},e=function(){var t=M.getGamepads&&M.getGamepads()||M.webkitGetGamepads&&M.webkitGetGamepads(),e=[];if(t)for(var n=0,r=t.length;n<r;n++){var o=t[n];o&&o.mapping===w&&e.push(o)}return e},n=function(t,e){if(!t||!t.buttons||e>=t.buttons.length)return I;var n,r=t.buttons[e];return r?(n=r,"object"==typeof r&&(n=r.value),1===n):I},i=A.requestAnimationFrame||A.webkitRequestAnimationFrame||A.mozRequestAnimationFrame||A.oRequestAnimationFrame||A.msRequestAnimationFrame,s=function(){this._updateCallback(this.gamepads)},a=function(){this._listening||(A.addEventListener(g,c,I),A.addEventListener(x,d,I),this._listening=T)},u=function(){this._listening&&(A.removeEventListener(g,c),A.removeEventListener(x,d),this._listening=I)},c=function(e){var n=e.gamepad;n.mapping===w&&(this.gamepads[n.index]=t(),this.gamepadConnected=T,this._update())},d=function(t){var e=t.gamepad,n=this.gamepads;n.forEach(function(t,r){r===e.index&&n.splice(r,1)}),n.length||(this.gamepadConnected=I),this._update()},h=function(){for(var t=e(),n=I,r={},o=0,i=0;i<t.length;i++){var s,a,u=t[i];u.timestamp&&(o=u.index,s=this._heldTimeByGP[o]||{},a=0===Object.keys(s).length,u.timestamp===this._prevTimestamps[o]&&a||(this._prevTimestamps[o]=u.timestamp,r[o]=u,n=T))}return n?r:I},f=function(){_=this;var e=_._checkForGamepadChange();if(e){_.gamepadConnected=T,_.gamepadSupported=T;var r=_.gamepads,o=_.buttonKeys;Object.keys(e).map(function(i){var s=e[i];if(s){typeof s!=_._prevRawGPTypes[i]&&(_._prevRawGPTypes[i]=typeof c);for(var a,u={},c=r[i]||t(),d=_._heldTimeByGP[i]||{},h=_._prevPressedByGP[i]||[],f=[],l=function(){d[b]={gamepadTimestamp:"number"==typeof P&&isFinite(P)?P:I,browserTimestamp:w},u[b]={pressed:T},f.push(b)},p=0,v=o.length;p<v;p++){var m,b=o[p],y=d[b],g=h.indexOf(b)>-1,x=n(s,p),w=Date.now(),P=s.timestamp,M=y&&y.gamepadTimestamp;g?x?y?(m=M&&M===s.timestamp,m&&w>y.browserTimestamp+_._heldButtonDelay||M&&s.timestamp>M+_._heldButtonDelay?(u[b]={held:T,pressed:I},f.push(b)):l()):l():(u[b]={released:T,held:I,pressed:I},d&&delete d[b]):x&&l()}c.timestamp=s.timestamp,c.buttons=u,a=s.axes,c.leftStick.x=a[0],c.leftStick.y=a[1],c.rightStick.x=a[2],c.rightStick.y=a[3],c.dPad.x=(u.dPadLeft?-1:0)+(u.dPadRight?1:0),c.dPad.y=(u.dPadUp?-1:0)+(u.dPadDown?1:0),_.gamepads[i]=c,_._heldTimeByGP[i]=d,_._prevPressedByGP[i]=f}}),_._update()}},l=function(){this._ticking||(this._ticking=T,this._tick())},p=function(){this._ticking=I},v=function(){this._poll(),this._ticking&&(i?i(this._tick.bind(this)):j(P+"This browser doesn't support requestAnimationFrame. Probably means that Gamepad API isn't supported either."))},m=function(t){return o?(this._updateCallback=t,this._addEvents(),void this._setupPoll()):void j(P+"This browser doesn't support Gamepad API, so onUpdate shouldn't be called.")},b=function(){return o?(this._updateCallback=I,this._removeEvents(),void this._removePoll()):void j(P+"This browser doesn't support Gamepad API, so offUpdate shouldn't be called.")},y=r.prototype,y._update=s,y._addEvents=a,y._removeEvents=u,y._onGamepadConnected=c,y._onGamepadDisconnected=d,y._checkForGamepadChange=h,y._poll=f,y._setupPoll=l,y._removePoll=p,y._tick=v,y.onUpdate=m,y.offUpdate=b}(),e.exports=r},{}]},{},[1])(1)})},function(t,e,n){"use strict";function r(t,e,n){if(t.justReleased=!1,t.justPressed=!1,e){var r=e.buttons[n];r&&(r.released?t.isPressed&&(t.isPressed=!1,t.justReleased=!1):r.pressed||r.held?(t.isPressed||(t.justPressed=!0),t.isPressed=!0,t.justReleased=!1):t.isPressed=!1)}}function o(t,e,n){e.justReleased=!1,e.justPressed=!1,e.isPressed=!1,d.b.forEach(n,function(n){var r=t.keyboard.getKey(n);r.isPressed&&(e.isPressed=!0),r.justPressed&&(e.justPressed=!0),r.justReleased&&(e.justReleased=!0)})}function i(t,e){t.justReleased=!1,t.justPressed=!1,t.isPressed=!1,d.b.forEach(e,function(e){e.isPressed&&(t.isPressed=!0),e.justPressed&&(t.justPressed=!0),e.justReleased&&(t.justReleased=!0)})}function s(t,e){r(t.n,e,"dPadUp"),r(t.e,e,"dPadRight"),r(t.s,e,"dPadDown"),r(t.w,e,"dPadLeft")}function a(t){var e=-1;return t.n.isPressed&&(e=0),t.e.isPressed&&(e=1),t.s.isPressed&&(e=2),t.w.isPressed&&(e=3),e}function u(t,e,n){var r=-1;if(t){var o=t[e];o&&(o.x>n?r=1:o.x<-n&&(r=3),o.y>n?r=2:o.y<-n&&(r=0))}return r}function c(t,e,n){var r=-1;if(t){var o=u(t,"leftStick",n);-1!==o&&(r=o);var i=u(t,"rightStick",n);-1!==i&&(r=i);var s=a(e);-1!==s&&(r=s)}return r}n.d(e,"a",function(){return h}),n.d(e,"b",function(){return f}),e.d=r,e.g=o,e.e=i,e.f=s,e.c=c;var d=n(0),h=function(){function t(){this.isPressed=!1,this.justPressed=!1,this.justReleased=!1}return t}(),f=function(){function t(){this.n=new h,this.e=new h,this.s=new h,this.w=new h}return t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(15),o=n(53),i=n(4),s=function(){function t(){this.menu=new o.a,this.modeName="title"}return t.prototype.init=function(t){var e=this;this.sge=t,this.container=new PIXI.Container,this.menu.init(t,this.container,"Hatformer! (ludum dare 40)"),r.playMusicMenu(),this.menu.addButtonSimple("Start Game").onClick=function(){e.menu.changeModeTo("game"),r.playMusic1()},this.menu.addButtonSimple("Sound Options").onClick=function(){e.menu.changeModeTo("sound-options")},this.menu.addButtonSimple("About").onClick=function(){e.menu.changeModeTo("about")},this.sprite=Object(i.c)(this.sge,"ase-512-16",2,1),this.sprite.scale.set(8),this.sprite.anchor.set(.5,.6875),this.sprite.position.set(65,60),this.container.addChild(this.sprite),this.sprite.rotation=2*Math.PI*-.08,this.update(null)},t.prototype.update=function(t){this.menu.update(t)},t}()},function(t,e,n){"use strict";function r(t,e){c=new s.Howl({src:t.urls,sprite:t.sprite}),c.once("load",function(){e()}),c.on("loaderror",function(t,e){console.log("howl","loaderror",t,e)}),c.mute(a.a().muteSound)}function o(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=null),d&&(d.stop(),d=null),d=new s.Howl({src:[t+".ogg",t+"mp3"],autoplay:!0,loop:e,volume:.75}),a.a().muteMusic&&d.mute(!0),d.on("loaderror",function(t,e){console.log("howl","loaderror",t,e)}),n&&d.on("end",function(){n()})}function i(t){u||a.a().muteSound||c.play(t)}e.a=r,e.c=o,e.b=i;var s=n(254),a=(n.n(s),n(33)),u=!1,c=null,d=null},function(t,e,n){(function(n){var r,o;/*!
 *  howler.js v2.0.5
 *  howlerjs.com
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var t=this||s;return t._counter=1e3,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var e=this||s;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&(e.masterGain.gain.value=t);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=e._howls[n]._soundById(r[o]);i&&i._node&&(i._node.volume=i._volume*t)}return e}return e._volume},mute:function(t){var e=this||s;e.ctx||p(),e._muted=t,e.usingWebAudio&&(e.masterGain.gain.value=t?0:e._volume);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=e._howls[n]._soundById(r[o]);i&&i._node&&(i._node.muted=!!t||i._muted)}return e},unload:function(){for(var t=this||s,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||s)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||s;if(t.state=t.ctx?t.ctx.state||"running":"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{var e=new Audio;void 0===e.oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{var e=new Audio;e.muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||s,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||s,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),n=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(e||n)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var r=function(){s._autoResume();var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),void 0===e.start?e.noteOn(0):e.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0)}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&s.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&s.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var s=new i,a=function(t){var e=this;if(!t.src||0===t.src.length)return void console.error("An array of source files must be passed with any new Howl.");e.init(t)};a.prototype={init:function(t){var e=this;return s.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhrWithCredentials=t.xhrWithCredentials||!1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onresume=[],e._webAudio=s.usingWebAudio&&!e._html5,void 0!==s.ctx&&s.ctx&&s.mobileAutoEnable&&s._enableMobileAudio(),s._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=this,e=null;if(s.noAudio)return void t._emit("loaderror",null,"No audio support.");"string"==typeof t._src&&(t._src=[t._src]);for(var n=0;n<t._src.length;n++){var r,o;if(t._format&&t._format[n])r=t._format[n];else{if("string"!=typeof(o=t._src[n])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}r=/^data:audio\/([^;,]+);/i.exec(o),r||(r=/\.([^.]+)$/.exec(o.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&s.codecs(r)){e=t._src[n];break}}return e?(t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new u(t),t._webAudio&&d(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t){t="__default";for(var o=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(o++,r=n._sounds[i]._id);1===o?t=null:r=null}}var a=r?n._soundById(r):n._inactiveSound();if(!a)return null;if(r&&!t&&(t=a._sprite||"__default"),"loaded"!==n._state){a._sprite=t,a._ended=!1;var u=a._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!a._paused)return e||setTimeout(function(){n._emit("play",a._id)},0),a._id;n._webAudio&&s._autoResume();var c=Math.max(0,a._seek>0?a._seek:n._sprite[t][0]/1e3),d=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-c),h=1e3*d/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=t,a._seek=c,a._start=n._sprite[t][0]/1e3,a._stop=(n._sprite[t][0]+n._sprite[t][1])/1e3,a._loop=!(!a._loop&&!n._sprite[t][2]);var f=a._node;if(n._webAudio){var l=function(){n._refreshBuffer(a);var t=a._muted||n._muted?0:a._volume;f.gain.setValueAtTime(t,s.ctx.currentTime),a._playStart=s.ctx.currentTime,void 0===f.bufferSource.start?a._loop?f.bufferSource.noteGrainOn(0,c,86400):f.bufferSource.noteGrainOn(0,c,d):a._loop?f.bufferSource.start(0,c,86400):f.bufferSource.start(0,c,d),h!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h)),e||setTimeout(function(){n._emit("play",a._id)},0)};"running"===s.state?l():(n.once("resume",l),n._clearTimer(a._id))}else{var p=function(){f.currentTime=c,f.muted=a._muted||n._muted||s._muted||f.muted,f.volume=a._volume*s.volume(),f.playbackRate=a._rate;try{if(f.play(),f.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");h!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h)),e||n._emit("play",a._id)}catch(t){n._emit("playerror",a._id,t)}},v=window&&window.ejecta||!f.readyState&&s._navigator.isCocoonJS;if(4===f.readyState||v)p();else{var m=function(){p(),f.removeEventListener(s._canPlayEvent,m,!1)};f.addEventListener(s._canPlayEvent,m,!1),n._clearTimer(a._id)}}return a._id},pause:function(t){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),r=0;r<n.length;r++){e._clearTimer(n[r]);var o=e._soundById(n[r]);if(o&&!o._paused&&(o._seek=e.seek(n[r]),o._rateSeek=0,o._paused=!0,e._stopFade(n[r]),o._node))if(e._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),e._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||e._emit("pause",o?o._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause())),e||n._emit("stop",i._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),o=0;o<r.length;o++){var i=n._soundById(r[o]);i&&(i._muted=t,n._webAudio&&i._node?i._node.gain.setValueAtTime(t?0:i._volume,s.ctx.currentTime):i._node&&(i._node.muted=!!s._muted||t),n._emit("mute",i._id))}return n},volume:function(){var t,e,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]){n._getSoundIds().indexOf(r[0])>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else r.length>=2&&(t=parseFloat(r[0]),e=parseInt(r[1],10));var o;if(!(void 0!==t&&t>=0&&t<=1))return o=e?n._soundById(e):n._sounds[0],o?o._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var i=0;i<e.length;i++)(o=n._soundById(e[i]))&&(o._volume=t,r[2]||n._stopFade(e[i]),n._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(t,s.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=t*s.volume()),n._emit("volume",o._id));return n},fade:function(t,e,n,r){var o=this;if("loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(t,e,n,r)}}),o;o.volume(t,r);for(var i=o._getSoundIds(r),a=0;a<i.length;a++){var u=o._soundById(i[a]);if(u){if(r||o._stopFade(i[a]),o._webAudio&&!u._muted){var c=s.ctx.currentTime,d=c+n/1e3;u._volume=t,u._node.gain.setValueAtTime(t,c),u._node.gain.linearRampToValueAtTime(e,d)}o._startFadeInterval(u,t,e,n,i[a])}}return o},_startFadeInterval:function(t,e,n,r,o){var i=this,s=e,a=e>n?"out":"in",u=Math.abs(e-n),c=u/.01,d=c>0?r/c:r;d<4&&(c=Math.ceil(c/(4/d)),d=4),t._interval=setInterval(function(){c>0&&(s+="in"===a?.01:-.01),s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,i._webAudio?(void 0===o&&(i._volume=s),t._volume=s):i.volume(s,t._id,!0),(n<e&&s<=n||n>e&&s>=n)&&(clearInterval(t._interval),t._interval=null,i.volume(n,t._id),i._emit("fade",t._id))},d)},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(n._interval),n._interval=null,e._emit("fade",t)),e},loop:function(){var t,e,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r._soundById(parseInt(o[0],10)))&&n._loop;t=o[0],r._loop=t}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var i=r._getSoundIds(e),s=0;s<i.length;s++)(n=r._soundById(i[s]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var t,e,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var o=n._getSoundIds(),i=o.indexOf(r[0]);i>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));var a;if("number"!=typeof t)return a=n._soundById(e),a?a._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var u=0;u<e.length;u++)if(a=n._soundById(e[u])){a._rateSeek=n.seek(e[u]),a._playStart=n._webAudio?s.ctx.currentTime:a._playStart,a._rate=t,n._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.value=t:a._node&&(a._node.playbackRate=t);var c=n.seek(e[u]),d=(n._sprite[a._sprite][0]+n._sprite[a._sprite][1])/1e3-c,h=1e3*d/Math.abs(a._rate);!n._endTimers[e[u]]&&a._paused||(n._clearTimer(e[u]),n._endTimers[e[u]]=setTimeout(n._ended.bind(n,a),h)),n._emit("rate",a._id)}return n},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var o=n._getSoundIds(),i=o.indexOf(r[0]);i>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var a=n._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var u=n.playing(e)?s.ctx.currentTime-a._playStart:0,c=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(c+u*Math.abs(a._rate))}return a._node.currentTime}var d=n.playing(e);d&&n.pause(e,!0),a._seek=t,a._ended=!1,n._clearTimer(e),d&&n.play(e,!0),!n._webAudio&&a._node&&(a._node.currentTime=t),n._emit("seek",e)}return n},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var r=0;r<e._sounds.length;r++)if(!e._sounds[r]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,r=e._soundById(t);return r&&(n=e._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++){if(e[n]._paused||t.stop(e[n]._id),!t._webAudio){/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(e[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(s._canPlayEvent,e[n]._loadFn,!1)}delete e[n]._node,t._clearTimer(e[n]._id);var r=s._howls.indexOf(t);r>=0&&s._howls.splice(r,1)}var o=!0;for(n=0;n<s._howls.length;n++)if(s._howls[n]._src===t._src){o=!1;break}return c&&o&&delete c[t._src],s.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var o=this,i=o["_on"+t];return"function"==typeof e&&i.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),o},off:function(t,e,n){var r=this,o=r["_on"+t],i=0;if("number"==typeof e&&(n=e,e=null),e||n)for(i=0;i<o.length;i++){var s=n===o[i].id;if(e===o[i].fn&&s||!e&&s){o.splice(i,1);break}}else if(t)r["_on"+t]=[];else{var a=Object.keys(r);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(r[a[i]])&&(r[a[i]]=[])}return r},once:function(t,e,n){var r=this;return r.on(t,e,n,1),r},_emit:function(t,e,n){for(var r=this,o=r["_on"+t],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(r,o[i].fn),0),o[i].once&&r.off(t,o[i].fn,o[i].id));return r},_loadQueue:function(){var t=this;if(t._queue.length>0){var e=t._queue[0];t.once(e.event,function(){t._queue.shift(),t._loadQueue()}),e.action()}return t},_ended:function(t){var e=this,n=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused)return setTimeout(e._ended.bind(e,t),100),e;var r=!(!t._loop&&!e._sprite[n][2]);if(e._emit("end",t._id),!e._webAudio&&r&&e.stop(t._id,!0).play(t._id),e._webAudio&&r){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=s.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),o)}return e._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),s._autoSuspend()),e._webAudio||r||e.stop(t._id),e},_clearTimer:function(t){var e=this;return e._endTimers[t]&&(clearTimeout(e._endTimers[t]),delete e._endTimers[t]),e},_soundById:function(t){for(var e=this,n=0;n<e._sounds.length;n++)if(t===e._sounds[n]._id)return e._sounds[n];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new u(t)},_drain:function(){var t=this,e=t._pool,n=0,r=0;if(!(t._sounds.length<e)){for(r=0;r<t._sounds.length;r++)t._sounds[r]._ended&&n++;for(r=t._sounds.length-1;r>=0;r--){if(n<=e)return;t._sounds[r]._ended&&(t._webAudio&&t._sounds[r]._node&&t._sounds[r]._node.disconnect(0),t._sounds.splice(r,1),n--)}}},_getSoundIds:function(t){var e=this;if(void 0===t){for(var n=[],r=0;r<e._sounds.length;r++)n.push(e._sounds[r]._id);return n}return[t]},_refreshBuffer:function(t){var e=this;return t._node.bufferSource=s.ctx.createBufferSource(),t._node.bufferSource.buffer=c[e._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,e},_cleanBuffer:function(t){var e=this;if(e._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=e._scratchBuffer}catch(t){}}return t.bufferSource=null,e}};var u=function(t){this._parent=t,this.init()};u.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=s._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),t._node.gain.setValueAtTime(n,s.ctx.currentTime),t._node.paused=!0,t._node.connect(s.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(s._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload="auto",t._node.volume=n*s.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(s._canPlayEvent,t._loadFn,!1)}};var c={},d=function(t){var e=t._src;if(c[e])return t._duration=c[e].duration,void l(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);f(r.buffer,t)}else{var i=new XMLHttpRequest;i.open("GET",e,!0),i.withCredentials=t._xhrWithCredentials,i.responseType="arraybuffer",i.onload=function(){var e=(i.status+"")[0];if("0"!==e&&"2"!==e&&"3"!==e)return void t._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".");f(i.response,t)},i.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete c[e],t.load())},h(i)}},h=function(t){try{t.send()}catch(e){t.onerror()}},f=function(t,e){s.ctx.decodeAudioData(t,function(t){t&&e._sounds.length>0&&(c[e._src]=t,l(e,t))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},l=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(t){s.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),e=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());(s._navigator&&s._navigator.standalone&&!r||s._navigator&&!s._navigator.standalone&&!r)&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.value=s._muted?0:1,s.masterGain.connect(s.ctx.destination)),s._setup()};r=[],void 0!==(o=function(){return{Howler:s,Howl:a}}.apply(e,r))&&(t.exports=o),e.Howler=s,e.Howl=a,"undefined"!=typeof window?(window.HowlerGlobal=i,window.Howler=s,window.Howl=a,window.Sound=u):void 0!==n&&(n.HowlerGlobal=i,n.Howler=s,n.Howl=a,n.Sound=u)}(),/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.0.5
 *  howlerjs.com
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;n>=0;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var r=this;return r.ctx&&r.ctx.listener?(e="number"!=typeof e?r._pos[1]:e,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof t?r._pos:(r._pos=[t,e,n],r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(t,e,n,r,o,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,o="number"!=typeof o?a[4]:o,i="number"!=typeof i?a[5]:i,"number"!=typeof t?a:(s._orientation=[t,e,n,r,o,i],s.ctx.listener.setOrientation(t,e,n,r,o,i),s)},Howl.prototype.init=function(t){return function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(e,n)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0]}for(var i=r._getSoundIds(n),s=0;s<i.length;s++){var a=r._soundById(i[s]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,o),"spatial"===o?a._panner.setPosition(e,0,0):a._panner.pan.value=e),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(e,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,r,o)}}),i;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof e)return i._pos;i._pos=[e,n,r]}for(var s=i._getSoundIds(o),a=0;a<s.length;a++){var u=i._soundById(s[a]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,r],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),u._panner.setPosition(e,n,r)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(e,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,r,o)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,r="number"!=typeof r?i._orientation[2]:r,void 0===o){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,r]}for(var s=i._getSoundIds(o),a=0;a<s.length;a++){var u=i._soundById(s[a]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,r],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),t(u,"spatial")),u._panner.setOrientation(e,n,r)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return r=o._soundById(parseInt(i[0],10)),r?r._pannerAttr:o._pannerAttr;e=i[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:o._panningModel})}else 2===i.length&&(e=i[0],n=parseInt(i[1],10));for(var s=o._getSoundIds(n),a=0;a<s.length;a++)if(r=o._soundById(s[a])){var u=r._pannerAttr;u={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:u.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:u.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:u.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:u.panningModel};var c=r._panner;c?(c.coneInnerAngle=u.coneInnerAngle,c.coneOuterAngle=u.coneOuterAngle,c.coneOuterGain=u.coneOuterGain,c.distanceModel=u.distanceModel,c.maxDistance=u.maxDistance,c.refDistance=u.refDistance,c.rolloffFactor=u.rolloffFactor,c.panningModel=u.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),t(r,"spatial"))}return o},Sound.prototype.init=function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this)}}(Sound.prototype.reset);var t=function(t,e){e=e||"spatial","spatial"===e?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.value=t._stereo),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id)}}()}).call(e,n(61))},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),o=n(97),i=n(33),s=function(){function t(){this.isActive=!1}return t.prototype.init=function(t,e,n,s){var a=this;this.sge=t,this.container=new PIXI.Container,this.options=s,this.settingKey=n,this.button=new o.a,this.button.init(t,e),this.intiialText=e,this.container.addChild(this.button.container),this.button.onClick=function(){console.log("change option",n);var t=i.a()[a.settingKey],e=r.b.findIndex(a.options,function(e,n){return e.value===t})+1;e>=a.options.length&&(e=0),console.log("change option to",a.options[e].value),i.c((o={},o[a.settingKey]=a.options[e].value,o)),a.onClick&&a.onClick();var o}},t.prototype.findOption=function(t,e){return r.b.find(t,function(t){return t===e||t.value===e})},t.prototype.doClick=function(){this.button.doClick()},t.prototype.setActive=function(t){this.isActive=t},t.prototype.update=function(t,e){var n=this.getOptionsText();this.button.text.text=this.intiialText+":   "+n,this.button.setActive(this.isActive),this.button.update(t,e)},t.prototype.getOptionsText=function(){var t=i.a()[this.settingKey],e="";return r.b.forEach(this.options,function(n){n.value===t?e+="["+n.label+"]  ":e+=" "+n.label+"   "}),e},t}()},function(t,e,n){"use strict";function r(t,e,n){var r=n-e;if(r<=0)throw new Error("invalid range");for(;t<e;)t+=r;for(;t>=n;)t-=r;return t}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(53),o=function(){function t(){this.menu=new r.a,this.modeName="about"}return t.prototype.init=function(t){var e=this;this.sge=t,this.container=new PIXI.Container,this.menu.init(t,this.container,"About"),this.menu.addButtonSimple("Back").onClick=function(){e.menu.changeModeTo("title")},this.menu.addButtonSimple("Made in 72 hours").onClick=function(){},this.menu.addButtonSimple("For Ludum Dare 40 (ldjam.com)").onClick=function(){},this.menu.addOptionSimple("Art / programming / design / levelsdw","stevie",[{label:"Stevie B.",value:"Stevie B."}]),this.menu.addOptionSimple("Design / testing / levels","brenden",[{label:"Brenden B.",value:"Brenden B."}]),this.menu.addOptionSimple("Music / Sfx / Design","casey",[{label:"Casey B.",value:"Casey B."}]),this.update(null)},t.prototype.update=function(t){this.menu.update(t)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){this.modeName="game"}return t.prototype.init=function(t){this.sge=t,this.container=new PIXI.Container,this.update(null)},t.prototype.update=function(t){},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(53),o=n(20),i=function(){function t(){this.menu=new r.a,this.modeName="sound-options"}return t.prototype.init=function(t){var e=this;this.sge=t,this.container=new PIXI.Container,this.menu.init(t,this.container,"Sound Options"),this.menu.addOptionSimple("Sounds","muteSound",[{label:"on",value:!1},{label:"off",value:!0}]).onClick=function(){o.a("gui:toggle-sounds")},this.menu.addOptionSimple("Music","muteMusic",[{label:"on",value:!1},{label:"off",value:!0}]).onClick=function(){o.a("gui:toggle-music")},this.menu.addButtonSimple("Back").onClick=function(){e.menu.changeModeTo("title")},this.update(null)},t.prototype.update=function(t){this.menu.update(t)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){this.frame=0,this.container=new PIXI.Container}return t.prototype.init=function(t,e,n){this.onDone=n,this.sge=t;var r=t.getTexture(e);this.sprite=new PIXI.Sprite(r),this.sprite.anchor.set(.5,.5),this.container.addChild(this.sprite)},t.prototype.update=function(){this.frame++;if(this.frame<120){var t=this.sge.getViewSize(),e=t.width,n=t.height,r=1;this.frame<40&&(r=this.frame/40),this.frame>80&&(r=(120-this.frame)/40),this.sprite.alpha=r,this.sprite.x=e/2,this.sprite.y=n/2;var o=Math.floor(e/this.sprite.texture.width),i=Math.floor(n/this.sprite.texture.height),s=o;i<s&&(s=i),this.sprite.scale.set(s)}else this.sprite.visible=!1,this.onDone&&(this.onDone(),this.onDone=null)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(0),o=n(4),i=n(10),s=n(54),a=n(16),u=n(263),c=n(15),d=(Math.PI,o.a(0,6)),h=o.a(1,2),f=o.a(1,0),l=o.a(1,1),p=o.a(2,0),v=function(){function t(){this.container=new PIXI.Container,this.isDying=!1,this.dyingFrames=0,this.hats=new s.a,this.bounds=new a.a,this.controller=new u.a,this.pastPositions=[],this.followers=[]}return t.prototype.init=function(t){this.context=t,this.body=o.c(this.context.sge,"ase-512-16",1,1),this.body.anchor.set(.5,1),this.head=o.c(this.context.sge,"ase-512-16",1,2),this.head.anchor.set(.5,1),this.bounds.airDrag=0,this.bounds.groundDrag=0,this.hats.init(this.context.sge),this.container.addChild(this.body),this.container.addChild(this.head),this.container.addChild(this.hats.container);for(var e=0;e<1;e++)this.addFollower()},t.prototype.reset=function(){this.bounds.reset(),this.hats.clear(),this.pastPositions=[],this.isDying=!1},t.prototype.moveTo=function(t,e){this.bounds.moveTo(t,e)},t.prototype.addFollower=function(){var t=[3,5],e=r.b.sample(t),n=o.c(this.context.sge,"ase-512-16",1,e);n.anchor.set(.5,1),this.followers.push(n),this.container.addChild(n)},t.prototype.clearFollowers=function(){var t=this;r.b.forEach(this.followers,function(e){t.container.removeChild(e)}),this.followers=[],this.addFollower()},t.prototype.die=function(){this.isDying||(this.context.achievements.addAchievement("You died!"),c.playMusicDie(),this.isDying=!0,this.dyingFrames=0,this.bounds.reset(),this.bounds.isGhost=!0,this.bounds.jump())},t.prototype.update=function(){this.bounds.width=8,this.bounds.height=14,"game"===this.context.menuManager.getMode()&&this.controller.update(this.context.sge.keyboard,this.bounds,this.isDying),this.bounds.update(this.context),this.pastPositions.unshift([this.bounds.x,this.bounds.y,this.bounds.facingRight]),this.pastPositions.length>300&&this.pastPositions.pop();for(var t=0;t<this.followers.length;t++){var e=this.followers[t],n=5*t+5;if(this.pastPositions.length>n){var r=this.pastPositions[n];e.position.set(r[0]-this.bounds.x,r[1]-this.bounds.y),e.scale.x=r[2]?1:-1}else e.position.set(0,0)}if(this.context.sge.keyboard.justPressed(i.a.space)&&this.hats.hats.length>0){this.context.sounds.playThrowHat();var o=this.hats.removeBottomHat();this.context.achievements.addAchievement("Hats off to you!"),console.log("throw a hat!");var s=this.context.hats.createAt(this.bounds.x,this.bounds.y-16-8);s.body.texture.frame=o.texture.frame,s.bounds.maxVy=16;var a=1e3;this.bounds.facingRight||(a=-a),s.bounds.vx=a}this.container.position.set(this.bounds.x,this.bounds.y),this.body.position.set(0,0),this.bounds.isFalling?this.body.texture.frame=f:this.bounds.isJumping?this.body.texture.frame=p:this.body.texture.frame=l,this.head.position.set(0,-16),this.head.scale.x=this.bounds.facingRight?1:-1,this.bounds.isTouchingFatal&&(this.isDying||this.die()),this.isDying&&this.dyingFrames++,this.head.texture.frame=this.isDying?d:h,this.hats.x=0,this.hats.y=-24,this.hats.facingRight=this.bounds.facingRight,this.hats.update()},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=[{y:2,x:1},{y:2,x:2},{y:2,x:3},{y:2,x:4},{y:2,x:5},{y:3,x:1},{y:3,x:2},{y:3,x:3},{y:3,x:4},{y:3,x:5}]},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(10),o=n(15),i=(Math.PI,function(){function t(){}return t.prototype.update=function(t,e,n){if(t.isPressed(r.a.arrowRight)||t.isPressed(r.a.d)?(e.movingFrames++,e.isMovingRight=!0,e.isMovingLeft=!1,e.facingRight=!0):t.isPressed(r.a.arrowLeft)||t.isPressed(r.a.a)?(e.movingFrames++,e.isMovingLeft=!0,e.isMovingRight=!1,e.facingRight=!1):(e.movingFrames=0,e.isMovingLeft=!1,e.isMovingRight=!1),e.isMovingLeft||e.isMovingRight){var i=e.isMovingLeft?-1:1;e.vx*i<0?e.accelX=8*i:e.vx*i<16?e.accelX=4*i:e.vx*i<32?e.accelX=2*i:e.vx*i<e.maxVx&&(e.accelX=1*i)}else{var s=1,a=e.vx>0?e.vx:-e.vx;s=a>16?4:a>8?2:1,e.onGround||(s/=2)<1&&(s=1),e.vx>0?(e.accelX=-s,e.accelX<-e.vx&&(e.accelX=-e.vx)):e.vx<0?(e.accelX=s,e.accelX>-e.vx&&(e.accelX=-e.vx)):e.accelX=0}e.onGround?(t.justPressed(r.a.w)||t.justPressed(r.a.arrowUp))&&(e.isJumping=!0,e.onGround=!1,o.playJump(),e.accelY=-8,e.jumpFrames=0):e.isJumping?(e.jumpFrames++,!n&&e.jumpFrames>6&&t.isUp(r.a.w)&&t.isUp(r.a.arrowUp)?e.setStateFalling():e.jumpFrames<4?e.accelY=-32:e.jumpFrames<8?e.accelY=-16:e.jumpFrames<10?e.accelY=-2:e.jumpFrames<28?e.accelY=-1:e.setStateFalling()):e.isFalling&&!n&&t.isUp(r.a.space)&&(e.isFastFalling=!0)},t}())},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(0),o=n(4),i=n(54),s=n(16),a=(Math.PI,[o.b(4,1,2),o.b(4,16,2),o.b(5,16,2),o.b(3,16,2)]),u=function(){function t(){this.items=[]}return t.prototype.init=function(t){this.context=t},t.prototype.createAt=function(t,e){var n=new c;return n.init(this.context),n.moveTo(t,e),this.items.push(n),this.context.layerObjects.addChild(n.container),n},t.prototype.update=function(){r.b.forEach(this.items,function(t){t.update()}),this.destroyMarked()},t.prototype.destroyMarked=function(){var t=this,e=r.b.remove(this.items,function(t){return t.isReadyToBeDestroyed});e.length>0&&(r.b.forEach(e,function(e){t.context.layerObjects.removeChild(e.container)}),console.log("cleaning up "+e.length+" items - "+this.items.length+" left"))},t.prototype.clear=function(){var t=this;r.b.forEach(this.items,function(e){e.isReadyToBeDestroyed=!0,t.context.layerObjects.removeChild(e.container)}),this.items=[]},t.prototype.drawBounds=function(t){r.b.forEach(this.items,function(e){t.draw(e.bounds)})},t}(),c=function(){function t(){this.container=new PIXI.Container,this.hats=new i.a,this.frame=0,this.frameIdx=0,this.jumpFrameCounter=0,this.bounds=new s.a,this.isReadyToBeDestroyed=!1,this.mode=0}return t.prototype.init=function(t){this.context=t,this.body=o.c(this.context.sge,"ase-512-16",4,1),this.body.anchor.set(.5,1),this.hats.init(this.context.sge),this.frameIdx=r.b.random(0,1,!1),this.container.addChild(this.body),this.container.addChild(this.hats.container)},t.prototype.destroy=function(){var t=this;this.isReadyToBeDestroyed||(this.isReadyToBeDestroyed=!0,this.context.particles.emitBlobParts(this.bounds.x,this.bounds.y-4),this.context.sounds.playSmash(),r.b.forEach(this.hats.hats,function(e,n){t.popHat(e,n)}))},t.prototype.popHat=function(t,e){var n=this.context.hats.createAt(this.bounds.x,this.bounds.y-4-8-3*e);n.body.texture.frame=t.texture.frame,n.bounds.vx=r.b.random(15,64),1===r.b.random(0,1)&&(n.bounds.vx*=-1),n.bounds.vy=r.b.random(-300,-50)},t.prototype.update=function(){if(!this.isReadyToBeDestroyed){var t=this.context.getPlayerHatCount();this.frame++,this.frame%16==0&&(this.mode=0,t>20&&(this.mode=3),t>30&&(this.mode=1),t>40&&(this.mode=2),this.frameIdx++,this.frameIdx=this.frameIdx%a[this.mode].length,this.body.texture.frame=a[this.mode][this.frameIdx]),this.bounds.isJumping&&this.bounds.jumpFrames++,this.bounds.jumpFrames>90&&(this.bounds.setStateFalling(),this.bounds.jumpFrames=0),t>20&&this.bounds.onGround&&--this.jumpFrameCounter<=0&&(this.jumpFrameCounter=r.b.random(60,120),this.bounds.jump()),this.bounds.update(this.context),this.container.position.set(this.bounds.x,this.bounds.y),this.body.scale.set(this.bounds.facingRight?1:-1,1),this.hats.x=0,this.hats.y=(0===this.frameIdx?0:1)-9,this.hats.facingRight=this.bounds.facingRight,this.hats.update()}},t.prototype.moveTo=function(t,e){this.bounds.moveTo(t,e)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(0),o=n(4),i=n(16),s=(Math.PI,o.b(2,1,5)),a=o.b(3,1,5),u=[];r.b.forEach(s,function(t){u.push(t)}),r.b.forEach(a,function(t){u.push(t)});var c=function(){function t(){this.items=[]}return t.prototype.init=function(t){this.context=t},t.prototype.createAt=function(t,e){var n=new d;return n.init(this.context),n.moveTo(t,e),n.body.texture.frame=r.b.sample(u),this.items.push(n),this.context.layerObjects.addChild(n.container),n},t.prototype.update=function(){r.b.forEach(this.items,function(t){t.update()}),this.destroyMarked()},t.prototype.destroyMarked=function(){var t=this,e=r.b.remove(this.items,function(t){return t.isReadyToBeDestroyed});e.length>0&&(r.b.forEach(e,function(e){t.context.layerObjects.removeChild(e.container)}),console.log("cleaning up "+e.length+" items - "+this.items.length+" left"))},t.prototype.clear=function(){var t=this;r.b.forEach(this.items,function(e){e.isReadyToBeDestroyed=!0,t.context.layerObjects.removeChild(e.container)}),this.items=[]},t.prototype.drawBounds=function(t){r.b.forEach(this.items,function(e){t.draw(e.bounds)})},t}(),d=function(){function t(){this.container=new PIXI.Container,this.frame=0,this.bounds=new i.a,this.isReadyToBeDestroyed=!1}return t.prototype.init=function(t){this.context=t,this.body=o.c(this.context.sge,"ase-512-16",2,1),this.body.anchor.set(.5,.6875),this.container.addChild(this.body)},t.prototype.destroy=function(){this.isReadyToBeDestroyed||(this.isReadyToBeDestroyed=!0)},t.prototype.update=function(){this.isReadyToBeDestroyed||(this.frame++,this.bounds.update(this.context),this.container.position.set(this.bounds.x,this.bounds.y),this.body.scale.set(this.bounds.facingRight?1:-1,1))},t.prototype.moveTo=function(t,e){this.bounds.moveTo(t,e)},t}()},function(t,e,n){"use strict";function r(t,e){for(var n=[],r=16/e,o=0;o<e;o++)for(var i=0;i<e;i++)n.push(new PIXI.Rectangle(t.x+o*r,t.y+i*r,r,r));return n}n.d(e,"a",function(){return a});var o=n(0),i=n(267),s=n(4),a=function(){function t(){this.emitters=[]}return t.prototype.init=function(t){this.sge=t,this.container=new PIXI.Container,this.particleEmitterBlob=this.addEmitter(),this.particleEmitterDecor=this.addEmitter()},t.prototype.addEmitter=function(t){void 0===t&&(t=[[0,0,8,8]]);var e=new i.a;return e.init(this.sge,"ase-512-16",t),this.container.addChild(e.container),this.emitters.push(e),e},t.prototype.emitDecorParts=function(t,e,n){var o=r(t,4);this.particleEmitterBlob.emit(e,n,{numMin:4,numMax:8,vMax:20/60,ay:.02,rMin:2*-Math.PI/60,rMax:2*Math.PI/60,framesMin:60,framesMax:180,rects:o})},t.prototype.emitBlobParts=function(t,e){var n=Object(s.b)(4,3,2);this.particleEmitterBlob.emit(t,e,{numMin:1,numMax:5,vMax:20/60,ay:.02,rMin:2*-Math.PI/60,rMax:2*Math.PI/60,framesMin:30,framesMax:120,rects:n})},t.prototype.update=function(){o.b.forEach(this.emitters,function(t){t.update()})},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),o=function(){function t(){this.maxParticles=200,this.particles=[]}return t.prototype.init=function(t,e,n){this.sge=t,this.textureKey=e,this.container=new PIXI.Container,this.textureRects=r.b.map(n,function(t){return new PIXI.Rectangle(t[0],t[1],t[2],t[3])})},t.prototype.getNextSprite=function(){for(var t=0;t<this.particles.length;t++){var e=this.particles[t];if(!e.sprite.visible)return e}if(this.particles.length<this.maxParticles){var n=this.sge.getTexture(this.textureKey),r=new PIXI.Sprite(new PIXI.Texture(n.baseTexture));r.texture.frame=this.textureRects[0],r.anchor.set(.5,.5),this.container.addChild(r);var e={sprite:r,vx:0,vy:0,vr:0,ax:0,ay:0,alpha1:1,alpha2:0,scale1:2,scale2:1,framesStart:100,framesLeft:100};return this.particles.push(e),e}return null},t.prototype.update=function(){for(var t=0;t<this.particles.length;t++){var e=this.particles[t];if(e.sprite.visible){e.sprite.x+=e.vx,e.sprite.y+=e.vy,e.sprite.rotation+=e.vr,e.framesLeft--,e.vx+=e.ax,e.vy+=e.ay;var n=1-e.framesLeft/e.framesStart;e.sprite.alpha=(1-n)*e.alpha1+n*e.alpha2,e.sprite.scale.set((1-n)*e.scale1+n*e.scale2),e.framesLeft<=0&&(e.sprite.visible=!1)}}},t.prototype.emit=function(t,e,n){var o=1,i=n.vMax,s=0,a=0,u=0,c=0,d=60,h=60;n&&(o=r.b.random(n.numMin||1,(n.numMax||1)+1,!1),n.rMin&&(s=n.rMin),n.rMax&&(a=n.rMax),n.ax&&(u=n.ax),n.ay&&(c=n.ay),d=n.framesMin||d,h=n.framesMax||h);for(var f=0;f<o;f++){var l=this.getNextSprite();if(!l)break;n&&n.rects?l.sprite.texture.frame=r.b.sample(n.rects):l.sprite.texture.frame=r.b.sample(this.textureRects),l.sprite.visible=!0,l.sprite.position.x=t,l.sprite.position.y=e,l.vx=r.b.random(-i,i,!0),l.vy=r.b.random(-i,i,!0),l.vr=r.b.random(s,a,!1),l.ax=u,l.ay=c,l.alpha1=1,l.alpha2=0,l.scale1=2,l.scale2=.25,l.framesStart=l.framesLeft=r.b.random(d,h,!1)}},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),o=n(4),i=function(){function t(){this.container=new PIXI.Container,this.spriteIdx=0,this.sprites=[]}return t.prototype.init=function(t){this.context=t},t.prototype.clear=function(){this.spriteIdx=0,r.b.forEach(this.sprites,function(t){t.visible=!1})},t.prototype.draw=function(t){var e=this.getSprite();e.x=t.boundsX1,e.y=t.boundsY1,e.width=t.boundsX2-t.boundsX1,e.height=t.boundsY2-t.boundsY1,e.visible=!0},t.prototype.getSprite=function(){if(++this.spriteIdx>this.sprites.length){var t=o.c(this.context.sge,"ase-512-16",0,1);return this.container.addChild(t),this.sprites.push(t),t}return this.sprites[this.spriteIdx-1]},t}()},function(t,e,n){"use strict";function r(t,e){return!(t.boundsX2<e.boundsX1||t.boundsX1>e.boundsX2)&&!(t.boundsY2<e.boundsY1||t.boundsY1>e.boundsY2)}e.a=r},function(t,e,n){"use strict";function r(t,e,n,r,l,p,v,m,b){void 0===b&&(b=!0);for(var y=t.width,_=t.height,g=0;g<_;g++)for(var x=0;x<y;x++){var w=x+e,P=g+n,M=P*r.blockWidth+w,A=g*y+x,I=(r.data[M],p[A]-1);if(I>1){var T=!1,j=!1,S=0;I>f&&(I&c&&(I-=c,T=!T),I&d&&(I-=d,j=!j),I&h&&(I-=h,T=!T,S=.5*Math.PI,j&&!T&&(S=.5*-Math.PI),!j&&T&&(j=!j,T=!T)),I&s&&(I-=s,I=4),I&a&&(I-=a,I=4),I&u&&(I-=u,I=4));var k=I%o,B=Math.floor(I/o);v&&(I=v(I,k,B),k=I%o,B=Math.floor(I/o));var O="_"+B+"_"+k;if(k>=512||B>=512){console.error("bad tex",I,k,B," at ",x,g);continue}if(!1===r.hasTile(O)){var C={name:O,textureName:i,tx:k,ty:B};r.addTile(C)}var F=r.setTileAtEx(l,w,P,O,T,j,S);m&&m(F,I,k,B)}else if(b){var F=r.clearTileAt(l,w,P);m&&m(F,I,0,0)}}}e.a=r;var o=32,i="public/ludumdare40/images/ase-512-16.png",s=2684354560,a=3221225472,u=1610612736,c=2147483648,d=1073741824,h=536870912,f=268435456},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(98),o=function(){function t(){this.frames=0,this.lastHats=0,this.isScanning=!0,this.scanY=0}return t.prototype.update=function(t){this.frames++;var e=t.player.hats.hats.length;if(this.isScanning){var n=t.tileMap,o=this.scanY;if(this.scanY++,o>=n.blockHeight)this.isScanning=!1;else for(var i=0;i<n.blockWidth;i++){var s=n.getTileAt(i,o);s.hideBossButtonPressed&&(s.canMove=t.pressedBossButton,s.sprites[r.e].alpha=s.canMove?.15:1),s.hideBossDefeated&&(s.canMove=t.defeatedBoss,s.sprites[r.e].alpha=s.canMove?.15:1),s.hideMidButtonPressed&&(s.canMove=t.pressedMidButton,s.sprites[r.e].alpha=s.canMove?.15:1),s.hatCountHide&&(s.hatCountHide<=e?(s.canMove=!0,s.sprites[r.e].alpha=.15):(s.canMove=!1,s.sprites[r.e].alpha=1)),s.hatCountShow&&(e>=s.hatCountShow?(s.canMove=!1,s.sprites[r.e].alpha=1):(s.canMove=!0,s.sprites[r.e].alpha=.15))}}else this.lastHats=e,this.isScanning=!0,this.scanY=0},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),o=(Math.PI,function(){function t(){this.items=[]}return t.prototype.init=function(t){this.context=t},t.prototype.createAt=function(t,e){var n=new i;return n.init(this.context),n.moveTo(t,e),this.items.push(n),this.context.layerObjects.addChild(n.container),n},t.prototype.update=function(){r.b.forEach(this.items,function(t){t.update()}),this.destroyMarked()},t.prototype.destroyMarked=function(){var t=this,e=r.b.remove(this.items,function(t){return t.isReadyToBeDestroyed});e.length>0&&(r.b.forEach(e,function(e){t.context.layerObjects.removeChild(e.container)}),console.log("cleaning up "+e.length+" items - "+this.items.length+" left"))},t.prototype.clear=function(){var t=this;r.b.forEach(this.items,function(e){e.isReadyToBeDestroyed=!0,t.context.layerObjects.removeChild(e.container)}),this.items=[]},t}()),i=function(){function t(){this.container=new PIXI.Container,this.isReadyToBeDestroyed=!1,this.type="hat"}return t.prototype.init=function(t){this.context=t,this.text=new PIXI.extras.BitmapText("99",{font:"8px defaultfont",align:"left"}),this.text.anchor=new PIXI.Point(0,0),this.container.addChild(this.text),this.text.position.set(-2.25,0)},t.prototype.destroy=function(){this.isReadyToBeDestroyed||(this.isReadyToBeDestroyed=!0)},t.prototype.update=function(){this.isReadyToBeDestroyed||("hat"===this.type?this.text.text=""+this.context.getPlayerHatCount():this.text.text=""+this.context.getPlayerLavaCount())},t.prototype.moveTo=function(t,e){this.container.x=t,this.container.y=e},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),o=(Math.PI,function(){function t(){this.items=[]}return t.prototype.init=function(t){this.context=t},t.prototype.createAt=function(t,e){var n=new i;return n.init(this.context),n.moveTo(t,e),this.items.push(n),this.context.layerObjects.addChild(n.container),n},t.prototype.update=function(){r.b.forEach(this.items,function(t){t.update()}),this.destroyMarked()},t.prototype.destroyMarked=function(){var t=this,e=r.b.remove(this.items,function(t){return t.isReadyToBeDestroyed});e.length>0&&(r.b.forEach(e,function(e){t.context.layerObjects.removeChild(e.container)}),console.log("cleaning up "+e.length+" items - "+this.items.length+" left"))},t.prototype.clear=function(){var t=this;r.b.forEach(this.items,function(e){e.isReadyToBeDestroyed=!0,t.context.layerObjects.removeChild(e.container)}),this.items=[]},t}()),i=function(){function t(){this.container=new PIXI.Container,this.isReadyToBeDestroyed=!1}return t.prototype.init=function(t){this.context=t,this.text=new PIXI.extras.BitmapText("this is some text",{font:"8px defaultfont",align:"left"}),this.text.anchor=new PIXI.Point(0,0),this.container.addChild(this.text),this.text.position.set(-2.25,0)},t.prototype.destroy=function(){this.isReadyToBeDestroyed||(this.isReadyToBeDestroyed=!0)},t.prototype.update=function(){this.isReadyToBeDestroyed},t.prototype.moveTo=function(t,e){this.container.x=t,this.container.y=e},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(0),o=n(4),i=n(54),s=n(16),a=(Math.PI,o.b(7,14,2)),u=function(){function t(){this.items=[]}return t.prototype.init=function(t){this.context=t},t.prototype.createAt=function(t,e){var n=new c;return n.init(this.context),n.moveTo(t,e),this.items.push(n),this.context.layerObjects.addChild(n.container),n},t.prototype.update=function(){r.b.forEach(this.items,function(t){t.update()}),this.destroyMarked()},t.prototype.destroyMarked=function(){var t=this,e=r.b.remove(this.items,function(t){return t.isReadyToBeDestroyed});e.length>0&&(r.b.forEach(e,function(e){t.context.layerObjects.removeChild(e.container)}),console.log("cleaning up "+e.length+" items - "+this.items.length+" left"))},t.prototype.clear=function(){var t=this;r.b.forEach(this.items,function(e){e.isReadyToBeDestroyed=!0,t.context.layerObjects.removeChild(e.container)}),this.items=[]},t.prototype.drawBounds=function(t){r.b.forEach(this.items,function(e){t.draw(e.bounds)})},t}(),c=function(){function t(){this.container=new PIXI.Container,this.hats=new i.a,this.frame=0,this.frameIdx=0,this.framesTillJump=0,this.bounds=new s.a,this.isReadyToBeDestroyed=!1}return t.prototype.init=function(t){this.context=t,this.body=o.c(this.context.sge,"ase-512-16",7,15),this.body.anchor.set(.5,1),this.framesTillJump=r.b.random(0,120),this.hats.init(this.context.sge),this.frameIdx=r.b.random(0,1,!1),this.container.addChild(this.body),this.container.addChild(this.hats.container)},t.prototype.destroy=function(){var t=this;this.isReadyToBeDestroyed||(this.isReadyToBeDestroyed=!0,this.context.particles.emitBlobParts(this.bounds.x,this.bounds.y-4),this.context.sounds.playSmash(),r.b.forEach(this.hats.hats,function(e,n){t.popHat(e,n)}))},t.prototype.popHat=function(t,e){var n=this.context.hats.createAt(this.bounds.x,this.bounds.y-4-8-3*e);n.body.texture.frame=t.texture.frame,n.bounds.vx=r.b.random(15,64),1===r.b.random(0,1)&&(n.bounds.vx*=-1),n.bounds.vy=r.b.random(-300,-50)},t.prototype.update=function(){this.isReadyToBeDestroyed||(this.frame++,this.frame%16==0&&(this.frameIdx++,this.frameIdx=this.frameIdx%a.length,this.body.texture.frame=a[this.frameIdx]),this.bounds.onGround&&--this.framesTillJump<=0&&(this.bounds.jump(),this.framesTillJump=r.b.random(0,120)),this.bounds.update(this.context),this.container.position.set(this.bounds.x,this.bounds.y),this.body.scale.set(this.bounds.facingRight?1:-1,1),this.hats.x=0,this.hats.y=(0===this.frameIdx?0:1)-9,this.hats.facingRight=this.bounds.facingRight,this.hats.update())},t.prototype.moveTo=function(t,e){this.bounds.moveTo(t,e)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),o=n(4),i=n(16),s=(Math.PI,[o.b(2,13,3),o.b(3,13,3),o.b(4,13,1),o.b(1,13,4)]),a=function(){function t(){this.items=[]}return t.prototype.init=function(t){this.context=t},t.prototype.createAt=function(t,e){var n=new u;return n.init(this.context),n.moveTo(t,e),this.items.push(n),this.context.layerDecor.addChild(n.container),n},t.prototype.update=function(){r.b.forEach(this.items,function(t){t.update()}),this.destroyMarked()},t.prototype.destroyMarked=function(){var t=this,e=r.b.remove(this.items,function(t){return t.isReadyToBeDestroyed});e.length>0&&(r.b.forEach(e,function(e){t.context.layerDecor.removeChild(e.container)}),console.log("cleaning up "+e.length+" items - "+this.items.length+" left"))},t.prototype.clear=function(){var t=this;r.b.forEach(this.items,function(e){e.isReadyToBeDestroyed=!0,t.context.layerDecor.removeChild(e.container)}),this.items=[]},t.prototype.drawBounds=function(t){r.b.forEach(this.items,function(e){t.draw(e.bounds)})},t}(),u=function(){function t(){this.container=new PIXI.Container,this.frame=0,this.frameIdx=0,this.objIndex=0,this.bounds=new i.a,this.isReadyToBeDestroyed=!1}return t.prototype.init=function(t){this.context=t,this.body=o.c(this.context.sge,"ase-512-16",4,1),this.body.anchor.set(.5,1),this.frameIdx=r.b.random(0,999,!1),this.container.addChild(this.body)},t.prototype.destroy=function(){this.isReadyToBeDestroyed||(this.isReadyToBeDestroyed=!0,this.context.particles.emitDecorParts(this.body.texture.frame,this.bounds.x,this.bounds.y-4),this.context.sounds.playSmash())},t.prototype.update=function(){if(!this.isReadyToBeDestroyed){this.frame++,this.frame%16==0&&this.frameIdx++;var t=s[this.objIndex];this.frameIdx=this.frameIdx%t.length,this.body.texture.frame=t[this.frameIdx],this.bounds.update(this.context),this.container.position.set(this.bounds.x,this.bounds.y),this.body.scale.set(this.bounds.facingRight?1:-1,1)}},t.prototype.moveTo=function(t,e){this.bounds.moveTo(t,e)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),o=n(10),i=(Math.PI,function(){function t(){this.items=[],this.keys={}}return t.prototype.init=function(t){this.context=t},t.prototype.createAt=function(t,e){var n=new s;return n.init(this.context),n.moveTo(t,e),this.items.push(n),this.context.layerObjects.addChild(n.container),n},t.prototype.addAchievement=function(t){if(!this.keys[t]){var e=this.context.player.bounds,n=e.x,o=e.y,i=["Good job!","Go you!","You are the best!","Wow!","Have a free hat!"];n+=r.b.random(-20,20),o+=r.b.random(-20,20);this.createAt(n,o).text.text="Achievement! "+t+" "+r.b.sample(i),this.keys[t]=t;this.context.hats.createAt(n,o-48).bounds.vx=r.b.random(-64,64)}},t.prototype.update=function(t){var e=t.player.bounds,n=(e.x,e.y,t.sge.keyboard);(n.justPressed(o.a.d)||n.justPressed(o.a.arrowRight))&&this.addAchievement("Moved!"),(n.justPressed(o.a.w)||n.justPressed(o.a.arrowUp))&&this.addAchievement("You can jump!"),(n.justPressed(o.a.a)||n.justPressed(o.a.arrowLeft))&&this.addAchievement("Moved the wrong way!"),(n.justPressed(o.a.s)||n.justPressed(o.a.arrowDown))&&this.addAchievement("Tried to duck, but could not!"),r.b.forEach(this.items,function(t){t.update()}),this.destroyMarked()},t.prototype.destroyMarked=function(){var t=this,e=r.b.remove(this.items,function(t){return t.isReadyToBeDestroyed});e.length>0&&(r.b.forEach(e,function(e){t.context.layerObjects.removeChild(e.container)}),console.log("cleaning up "+e.length+" items - "+this.items.length+" left"))},t.prototype.clear=function(){var t=this;this.keys={},r.b.forEach(this.items,function(e){e.isReadyToBeDestroyed=!0,t.context.layerObjects.removeChild(e.container)}),this.items=[]},t}()),s=function(){function t(){this.container=new PIXI.Container,this.isReadyToBeDestroyed=!1}return t.prototype.init=function(t){this.context=t,this.text=new PIXI.extras.BitmapText("this is some text",{font:"8px defaultfont",align:"left"}),this.text.anchor=new PIXI.Point(0,0),this.container.addChild(this.text),this.text.position.set(-2.25,0)},t.prototype.destroy=function(){this.isReadyToBeDestroyed||(this.isReadyToBeDestroyed=!0)},t.prototype.update=function(){this.isReadyToBeDestroyed},t.prototype.moveTo=function(t,e){this.container.x=t,this.container.y=e},t}()}]);
//# sourceMappingURL=game.bundle.js.map